"use strict";(()=>{var Se=Object.defineProperty;var L=(e,t)=>{for(var o in t)Se(e,o,{get:t[o],enumerable:!0})};var R={};L(R,{after:()=>h,before:()=>we,instead:()=>xe,unpatchAll:()=>se});var N=["a","b","i"],y=new Map;function ne(e,t,o,s,l){let a=y.get(t)?.[e];if(!a)return l?Reflect.construct(t[e],o,s):t[e].apply(s,o);for(let i of a.b.values()){let d=i.call(s,o);Array.isArray(d)&&(o=d)}let c=(...i)=>l?Reflect.construct(a.o,i,s):a.o.apply(s,i);for(let i of a.i.values()){let d=c;c=(...x)=>i.call(s,x,d)}let n=c(...o);for(let i of a.a.values())n=i.call(s,o,n)??n;return n}function E(e,t,o,s){let l=y.get(e),a=l?.[t];return a?.[s].has(o)?(a[s].delete(o),N.every(c=>a[c].size===0)&&(Reflect.defineProperty(e,t,{value:a.o,writable:!0,configurable:!0})||(e[t]=a.o),delete l[t]),Object.keys(l).length==0&&y.delete(e),!0):!1}function se(){for(let[e,t]of y.entries())for(let o in t)for(let s of N)for(let l of t[o]?.[s].keys()??[])E(e,o,l,s)}var _=e=>(t,o,s,l=!1)=>{if(typeof o[t]!="function")throw new Error(`${t} is not a function in ${o.constructor.name}`);y.has(o)||y.set(o,{});let a=y.get(o);if(!a[t]){let i=o[t];a[t]={o:i,b:new Map,i:new Map,a:new Map};let d=(u,A,B)=>{let be=ne(t,o,A,u,B);return l&&n(),be},x=new Proxy(i,{apply:(u,A,B)=>d(A,B,!1),construct:(u,A)=>d(i,A,!0),get:(u,A,B)=>A=="toString"?i.toString.bind(i):Reflect.get(u,A,B)});Reflect.defineProperty(o,t,{value:x,configurable:!0,writable:!0})||(o[t]=x)}let c=Symbol(),n=()=>E(o,t,c,e);return a[t][e].set(c,s),n};var we=_("b"),xe=_("i"),h=_("a");var ie={...R};var H={};L(H,{filterModules:()=>$,find:()=>k,findAll:()=>U,findByDisplayName:()=>M,findByDisplayNameAll:()=>Ie,findByProps:()=>m,findByPropsAll:()=>Ae,modules:()=>j});var D;function ae(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(let e in window.modules){let t=Number(e),o=window.modules[t].publicModule.exports;if(!D&&o&&o.isMoment&&(D=o),!o||o===window||o.proxygone===null){ae(t);continue}}var $=(e,t=!1)=>o=>{let s=[],l=D?.locale();for(let a in e){let c=Number(a),n=e[c].publicModule.exports;if(!e[c].isInitialized)try{__r(c),l&&l!==D.locale()&&D.locale(l)}catch{}if(!n){ae(c);continue}try{if(n.default&&n.__esModule&&o(n.default)){if(t)return n.default;s.push(n.default)}if(o(n)){if(t)return n;s.push(n)}}catch(i){console.error(`Failed to getModule... ${i.stack||i.toString()}`)}}if(!t)return s},j=window.modules,k=$(j,!0),U=$(j),ce=e=>t=>e.every(o=>t[o]!==void 0),le=(e,t)=>t?o=>o.name===e:o=>o?.default?.name===e,m=(...e)=>k(ce(e)),Ae=(...e)=>U(ce(e)),M=(e,t=!0)=>k(le(e,t)),Ie=(e,t=!0)=>U(le(e,t));var ve=m("setLogFn").default,Fe=new ve("Vendetta"),P=Fe;var G={};L(G,{AsyncStorage:()=>ke,React:()=>r,ReactNative:()=>g,channels:()=>De,constants:()=>Be,i18n:()=>O,toasts:()=>C,url:()=>V});var Be=m("API_HOST"),De=m("getVoiceChannelId"),O=m("Messages"),V=m("openURL"),C=k(e=>e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop),r=m("createElement"),g=m("Text","Image"),ke=m("setItem");var W=m("registerAsset"),b={};function z(){try{h("registerAsset",W,(e,t)=>{let o=e[0];b[o.name]={...o,id:t}});for(let e=1;;e++){let t=W.getAssetByID(e);if(!t)break;b[t.name]||(b[t.name]={...t,id:e})}}catch{}}var pe=e=>Object.values(b).find(e),me=e=>b[e],de=e=>W.getAssetByID(e),p=e=>b[e]?.id;function J(e,t,{walkable:o=[],ignore:s=[],maxDepth:l=100}={}){let a=0;function c(n,i,{walkable:d=[],ignore:x=[]}={}){if(a+=1,!(a>l)){if(typeof i=="string"){if(n.hasOwnProperty(i))return n[i]}else if(i(n))return n;if(!!n){if(Array.isArray(n))for(let v of n){let u=c(v,i,{walkable:d,ignore:x});if(u)return u}else if(typeof n=="object"){for(let v of Object.keys(n))if(!(d!=null&&d.includes(v))&&!x.includes(v))try{let u=c(n[v],i,{walkable:d,ignore:x});if(u)return u}catch{}}}}}return c(e,t,{walkable:o,ignore:s})}function Q(e,t){return J(e,t,{walkable:["props","children","child","sibling"]})}var S=m("FormSection");var{FormRow:F,FormSection:Pe}=S;function X({navigation:e}){return r.createElement(Pe,{key:"Vendetta",title:"Vendetta"},r.createElement(F,{label:"General",leading:()=>r.createElement(F.Icon,{source:p("settings")}),trailing:F.Arrow,onPress:()=>e.push("VendettaSettings")}),r.createElement(F,{label:"Asset Browser",leading:()=>r.createElement(F.Icon,{source:p("grid")}),trailing:F.Arrow,onPress:()=>e.push("VendettaAssetBrowser")}))}var fe="https://discord.gg/n9QQ4XhhJP",ue="https://github.com/vendetta-mod";function I(e,t){return C.open({content:e,source:t})}var w,Te=eval;function ge(e){if(w!==void 0&&w.readyState!==WebSocket.CLOSED&&w.close(),e===""){I("Invalid debugger URL!",p("Small"));return}w=new WebSocket(`ws://${e}`),w.addEventListener("open",()=>I("Connected to debugger.",p("Check"))),w.addEventListener("message",t=>{try{Te(t.data)}catch(o){console.error(o)}}),w.addEventListener("error",t=>{console.log(`Debugger error: ${t.message}`),I("An error occurred with the debugger connection!",p("Small"))})}function ye(){h("nativeLoggingHook",globalThis,(e,t)=>{w?.readyState===WebSocket.OPEN&&w.send(JSON.stringify({message:e[0],level:e[1]})),P.log(e[0])})}var _e=m("setString","getString");function T(e){try{_e.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}var{FormRow:he,FormText:Me}=S;function q({label:e,version:t,icon:o}){return r.createElement(he,{label:e,leading:()=>r.createElement(he.Icon,{source:p(o)}),trailing:()=>r.createElement(Me,null,t),onPress:()=>{T(`${e} - ${t}`),I("Copied version to clipboard.",p("toast_copy_link"))}})}var{FormRow:f,FormSection:K,FormInput:Oe}=S,Y=window.HermesInternal.getRuntimeProperties(),Z=g.Platform.constants.reactNativeVersion;function ee(){let[e,t]=r.useState(""),o=[{label:"Discord",version:g.NativeModules.InfoDictionaryManager.Version,icon:"Discord"},{label:"React",version:r.version,icon:"ic_category_16px"},{label:"React Native",version:`${Z.major||0}.${Z.minor||0}.${Z.patch||0}`,icon:"mobile"},{label:"Hermes",version:`${Y["OSS Release Version"]} ${Y.Build} | Bytecode ${Y["Bytecode Version"]}`,icon:"ic_hammer_and_chisel_24px"}];return r.createElement(g.ScrollView,null,r.createElement(K,{title:"Links",android_noDivider:!0},r.createElement(f,{label:"Discord Server",leading:()=>r.createElement(f.Icon,{source:p("Discord")}),trailing:f.Arrow,onPress:()=>V.openURL(fe)}),r.createElement(f,{label:"GitHub",leading:()=>r.createElement(f.Icon,{source:p("img_account_sync_github_white")}),trailing:f.Arrow,onPress:()=>V.openURL(ue)})),r.createElement(K,{title:"Debug"},r.createElement(Oe,{value:e,onChange:s=>t(s),title:"DEBUGGER URL"}),r.createElement(f,{label:"Connect to debug websocket",leading:()=>r.createElement(f.Icon,{source:p("copy")}),trailing:f.Arrow,onPress:()=>ge(e)}),r.createElement(f,{label:"Reload Discord",leading:()=>r.createElement(f.Icon,{source:p("ic_message_retry")}),trailing:f.Arrow,onPress:()=>g.NativeModules.BundleUpdaterManager.reload()})),r.createElement(K,{title:"Versions"},o.map(s=>r.createElement(q,{label:s.label,version:s.version,icon:s.icon}))))}var{FormRow:Ve}=S,Le=g.StyleSheet.create({asset:{width:32,height:32}});function te({asset:e}){return r.createElement(Ve,{label:`${e.name} - ${e.id}`,trailing:()=>r.createElement(g.Image,{source:e.id,style:Le.asset}),onPress:()=>{T(e.name),I("Copied asset name to clipboard.",p("toast_copy_link"))}})}var{FormInput:Ne}=S;function oe(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement(Ne,{value:e,onChange:o=>t(o),title:"SEARCH"}),r.createElement(g.FlatList,{data:Object.values(b).filter(o=>o.name.includes(e)),renderItem:({item:o})=>r.createElement(te,{asset:o}),keyExtractor:o=>o.name}))}var Ee=M("getScreens",!1),Re=M("UserSettingsOverviewWrapper",!1);function re(){let e=h("default",Ee,(o,s)=>({...s,VendettaSettings:{title:"Vendetta",render:ee},VendettaAssetBrowser:{title:"Asset Browser",render:oe}})),t=h("default",Re,(o,s)=>{t();let l=Q(s.props.children,a=>a.type&&a.type.name==="UserSettingsOverview");h("renderSupportAndAcknowledgements",l.type.prototype,(a,{props:{children:c}})=>{let n=c.findIndex(i=>i?.type?.name==="UploadLogsButton");n!==-1&&c.splice(n,1)}),h("render",l.type.prototype,(a,{props:{children:c}})=>{let n=[O.Messages.BILLING_SETTINGS,O.Messages.PREMIUM_SETTINGS],i=c.findIndex(d=>n.includes(d.props.title));c.splice(i===-1?4:i,0,r.createElement(X,{navigation:l.props.navigation}))})})}console.log("Hello from Vendetta!");async function $e(){let e=!1;try{re(),z(),ye(),window.vendetta={patcher:ie,metro:{...H,common:G},logger:P,ui:{assets:{all:b,find:pe,getAssetByID:de,getAssetByName:me,getAssetIDByName:p}}}}catch(t){e=!0,alert(`Vendetta failed to initialize...
${t.stack||t.toString()}`)}e||P.log("Vendetta is ready!")}$e();})();
//# sourceURL=Vendetta