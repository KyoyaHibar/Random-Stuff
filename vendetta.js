(function(){"use strict";const U=function(e){return Object.values(window.modules).find(function(t){return t?.publicModule.exports?.[e]})?.publicModule?.exports};window.React=U("createElement");const u=U("Text"),z=U("AbortCodes"),G=U("isMoment");function be(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(const e in window.modules){const t=Number(e),n=window.modules[t]?.publicModule?.exports;if(!n||n===window||n.proxygone===null){be(t);continue}}const Re=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(n){const r=[],o=G?.locale();for(const a in e){const c=Number(a),i=e[c]?.publicModule?.exports;if(!e[c].isInitialized)try{__r(c),o&&o!==G.locale()&&G.locale(o)}catch{}if(!i){be(c);continue}try{if(i.default&&i.__esModule&&n(i.default)){if(t)return i.default;r.push(i.default)}if(n(i)){if(t)return i;r.push(i)}}catch(l){console.error(`Failed to filter modules... ${l.stack||l.toString()}`)}}if(!t)return r}},ae=window.modules,k=Re(ae,!0),ce=Re(ae),ye=function(e){return function(t){return e.every(function(n){return t[n]!==void 0})}},we=function(e,t){return t?function(n){return n?.name===e}:function(n){return n?.default?.name===e}},it=function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k(ye(t))},lt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ce(ye(t))},H=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return k(we(e,t))},st=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ce(we(e,t))},ie=function(e){return k(it(e))};var ut=Object.freeze({__proto__:null,find:k,findAll:ce,findByDisplayName:H,findByDisplayNameAll:st,findByProps:d,findByPropsAll:lt,findByStoreName:ie,modules:ae});const dt=d("getVoiceChannelId"),le=d("Messages"),Ee=d("openURL"),_e=k(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop}),V=d("createThemedStyleSheet"),Se=d("setString","getString","hasString"),W=d("registerAsset"),$e=d("acceptInviteAndTransitionToInviteChannel"),se=d("getBuiltInCommands"),mt=d("pushLazy"),ft=d("createStackNavigator"),L=d("NavigationContainer"),gt=d("connectStores"),ue=d("_currentDispatchActionType"),pt=window.React;var ht=Object.freeze({__proto__:null,Flux:gt,FluxDispatcher:ue,NavigationNative:L,React:pt,ReactNative:u,assets:W,channels:dt,clipboard:Se,commands:se,constants:z,i18n:le,invites:$e,moment:G,navigation:mt,navigationStack:ft,stylesheet:V,toasts:_e,url:Ee});const De=["a","b","i"],P=new Map;function vt(e,t,n,r,o){const a=P.get(t)?.[e];if(!a)return o?Reflect.construct(t[e],n,r):t[e].apply(r,n);for(const l of a.b.values()){const g=l.call(r,n);Array.isArray(g)&&(n=g)}let c=(...l)=>o?Reflect.construct(a.o,l,r):a.o.apply(r,l);for(const l of a.i.values()){const g=c;c=(...T)=>l.call(r,T,g)}let i=c(...n);for(const l of a.a.values())i=l.call(r,n,i)??i;return i}function Te(e,t,n,r){const o=P.get(e),a=o?.[t];return a?.[r].has(n)?(a[r].delete(n),De.every(c=>a[c].size===0)&&(Reflect.defineProperty(e,t,{value:a.o,writable:!0,configurable:!0})||(e[t]=a.o),delete o[t]),Object.keys(o).length==0&&P.delete(e),!0):!1}function bt(){for(const[e,t]of P.entries())for(const n in t)for(const r of De)for(const o of t[n]?.[r].keys()??[])Te(e,n,o,r)}var de=e=>(t,n,r,o=!1)=>{if(typeof n[t]!="function")throw new Error(`${t} is not a function in ${n.constructor.name}`);P.has(n)||P.set(n,{});const a=P.get(n);if(!a[t]){const l=n[t];a[t]={o:l,b:new Map,i:new Map,a:new Map};const g=(R,I,j)=>{const fn=vt(t,n,I,R,j);return o&&i(),fn},T=new Proxy(l,{apply:(R,I,j)=>g(I,j,!1),construct:(R,I)=>g(l,I,!0),get:(R,I,j)=>I=="toString"?l.toString.bind(l):Reflect.get(R,I,j)});Reflect.defineProperty(n,t,{value:T,configurable:!0,writable:!0})||(n[t]=T)}const c=Symbol(),i=()=>Te(n,t,c,e);return a[t][e].set(c,r),i};const Rt=de("b"),yt=de("i"),S=de("a");var wt=Object.freeze({__proto__:null,after:S,before:Rt,instead:yt,unpatchAll:bt}),Et={...wt};const $={};function Ie(){const e=S("registerAsset",W,function(t,n){const r=t[0];$[r.name]={...r,id:n}});for(let t=1;;t++){const n=W.getAssetByID(t);if(!n)break;$[n.name]||($[n.name]={...n,id:t})}return e}const _t=function(e){return Object.values($).find(e)},St=function(e){return $[e]},$t=function(e){return W.getAssetByID(e)},s=function(e){return $[e]?.id};var Dt=Object.freeze({__proto__:null,all:$,find:_t,getAssetByID:$t,getAssetByName:St,getAssetIDByName:s,patchAssets:Ie});function h(e,t){return _e.open({content:e,source:t})}var Tt=Object.freeze({__proto__:null,showToast:h});const Pe=d("setLogFn").default,D=new Pe("Vendetta");let v;function Ae(e){if(v!==void 0&&v.readyState!==WebSocket.CLOSED&&v.close(),e===""){h("Invalid debugger URL!",s("Small"));return}v=new WebSocket(`ws://${e}`),v.addEventListener("open",function(){return h("Connected to debugger.",s("Check"))}),v.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(n){console.error(n)}}),v.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),h("An error occurred with the debugger connection!",s("Small"))})}function Ce(){const e=S("nativeLoggingHook",globalThis,function(t){v?.readyState===WebSocket.OPEN&&v.send(JSON.stringify({message:t[0],level:t[1]})),D.log(t[0])});return function(){v&&v.close(),e()}}const me="8354b38";function Fe(){const e=u.NativeModules.InfoDictionaryManager,t=u.NativeModules.DCDDeviceManager,n=window.HermesInternal.getRuntimeProperties(),r=n["OSS Release Version"],o="for RN ",a=u.Platform.constants,c=a.reactNativeVersion;return{vendetta:{version:me,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:e.Version,build:e.Build},react:{version:React.version,nativeVersion:r.startsWith(o)?r.substring(o.length):`${c.major}.${c.minor}.${c.patch}`},hermes:{version:r,buildType:n.Build,bytecodeVersion:n["Bytecode Version"]},...u.Platform.select({android:{os:{name:"Android",version:a.Release,sdk:a.Version}},ios:{os:{name:a.systemName,version:a.osVersion}}}),...u.Platform.select({android:{device:{manufacturer:a.Manufacturer,brand:a.Brand,model:a.Model,codename:t.device}},ios:{device:{manufacturer:t.deviceManufacturer,brand:t.deviceBrand,model:t.deviceModel,codename:t.device}}})}}var It=Object.freeze({__proto__:null,connectToDebugger:Ae,getDebugInfo:Fe,patchLogHook:Ce,get socket(){return v},versionHash:me});let B=[];function Oe(){const e=S("getBuiltInCommands",se,function(t,n){return n.concat(B)});return function(){B=[],e()}}function Pt(e){const t=se.getBuiltInCommands(1,!0,!1);t.sort(function(r,o){return parseInt(o.id)-parseInt(r.id)});const n=t[t.length-1];return e.id=(parseInt(n.id,10)-1).toString(),B.push(e),function(){return B=B.filter(function(r){let{id:o}=r;return o!==e.id})}}var At=Object.freeze({__proto__:null,patchCommands:Oe,registerCommand:Pt});const Ct=Object.freeze({GET:"GET",SET:"SET",DEL:"DEL"});function Ft(){return{listeners:Object.values(Ct).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var n=this;const r=function(o,a){n.off(o,r),t(o,a)};this.on(e,r)},emit(e,t){for(const n of this.listeners[e])n(e,t)}}}const ke=u.NativeModules.MMKVManager,x=u.NativeModules.DCDFileManager,Ve=u.Platform.select({default:function(e){return e},ios:function(e){return`Documents/${e}`}}),K=function(e){return{get:async function(){return JSON.parse(await ke.getItem(e)??"{}")},set:function(t){return ke.setItem(e,JSON.stringify(t))}}},Le=function(e){let t;return{get:async function(){const n=`${x.getConstants().DocumentsDirPath}/${e}`;return!t&&!await x.fileExists(n)?(t=!0,x.writeFile("documents",Ve(e),"{}","utf8")):JSON.parse(await x.readFile(n,"utf8"))},set:function(n){return void x.writeFile("documents",Ve(e),JSON.stringify(n),"utf8")}}};u.NativeModules.MMKVManager;const Be=Symbol("emitter accessor"),xe=Symbol("wrapSync promise accessor");function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ft();function n(r,o){return new Proxy(r,{get(a,c){if(c===Be)return t;const i=[...o,c],l=a[c];return l!=null?(t.emit("GET",{path:i,value:l}),typeof l=="object"?n(l,i):l):l},set(a,c,i){return a[c]=i,t.emit("SET",{path:[...o,c],value:i}),!0},deleteProperty(a,c){const i=delete a[c];return i&&t.emit("DEL",{path:[...o,c]}),i}})}return{proxy:n(e,[]),emitter:t}}function F(e){const t=e[Be],[,n]=React.useReducer(function(r){return~r},0);return React.useEffect(function(){const r=function(){return n()};return t.on("SET",r),t.on("DEL",r),function(){t.off("SET",r),t.off("DEL",r)}},[]),e}async function M(e){const t=await e.get(),{proxy:n,emitter:r}=Me(t),o=function(){return e.set(n)};return r.on("SET",o),r.on("DEL",o),n}function J(e){let t;const n=[],r=function(o){return t?o():n.push(o)};return e.then(function(o){t=o,n.forEach(function(a){return a()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(o){return[o,function(a){for(var c=arguments.length,i=new Array(c>1?c-1:0),l=1;l<c;l++)i[l-1]=arguments[l];return Reflect[o](t??a,...i)}]})),get(o,a,c){return a===xe?r:Reflect.get(t??o,a,c)}})}const Ne=function(e){return new Promise(function(t){return e[xe](t)})};var Ot=Object.freeze({__proto__:null,awaitSyncWrapper:Ne,createFileBackend:Le,createMMKVBackend:K,createProxy:Me,createStorage:M,useProxy:F,wrapSync:J});async function fe(e,t){const n=await fetch(e,t);if(!n.ok)throw new Error("Request returned non-ok");return n}const m=J(M(K("VENDETTA_PLUGINS"))),A={};async function Q(e){e.endsWith("/")||(e+="/");const t=m[e];let n;try{n=await(await fe(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}let r;if(t?.manifest.hash!==n.hash)try{r=await(await fe(e+(n.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!r&&!t)throw new Error(`Failed to fetch JS for ${e}`);m[e]={id:e,manifest:n,enabled:t?.enabled??!1,update:t?.update??!0,js:r??t.js}}async function je(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in m)throw new Error("Plugin already installed");await Q(e),t&&await Y(e)}async function Ue(e){const t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await M(K(e.id))},logger:new Pe(`Vendetta \xBB ${e.manifest.name}`)},n=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,r=(0,eval)(n)(t),o=typeof r=="function"?r():r;return o.default||o}async function Y(e){e.endsWith("/")||(e+="/");const t=m[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{const n=await Ue(t);A[e]=n,n.onLoad?.(),t.enabled=!0}catch(n){D.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,n);try{A[t.id]?.onUnload?.()}catch(r){D.error(`Plugin ${t.id} errored whilst unloading`,r)}delete A[e],t.enabled=!1}}function q(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");const n=m[e],r=A[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!r)throw new Error("Attempted to stop a non-started plugin");try{r.onUnload?.()}catch(o){D.error(`Plugin ${n.id} errored whilst unloading`,o)}delete A[e],t&&(n.enabled=!1)}function ze(e){e.endsWith("/")||(e+="/"),m[e].enabled&&q(e),delete m[e]}async function Ge(){await Ne(m);const e=Object.keys(m);return await Promise.allSettled(e.filter(function(t){return m[t].enabled&&m[t].update}).map(function(t){return Q(t)})),await Promise.allSettled(e.filter(function(t){return m[t].enabled}).map(function(t){return Y(t)})),e.filter(function(t){return!m[t].enabled&&m[t].update}).forEach(function(t){return Q(t)}),kt}const kt=function(){return Object.keys(A).forEach(function(e){return q(e,!1)})},He=function(e){return A[e]?.settings};var Vt=Object.freeze({__proto__:null,evalPlugin:Ue,fetchPlugin:Q,getSettings:He,initPlugins:Ge,installPlugin:je,plugins:m,removePlugin:ze,startPlugin:Y,stopPlugin:q});function We(e,t){let{walkable:n=[],ignore:r=[],maxDepth:o=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0;function c(i,l){let{walkable:g=[],ignore:T=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(a+=1,!(a>o)){if(typeof l=="string"){if(i.hasOwnProperty(l))return i[l]}else if(l(i))return i;if(i){if(Array.isArray(i))for(const O of i){const R=c(O,l,{walkable:g,ignore:T});if(R)return R}else if(typeof i=="object"){for(const O of Object.keys(i))if(!(g!=null&&g.includes(O))&&!T.includes(O))try{const R=c(i[O],l,{walkable:g,ignore:T});if(R)return R}catch{}}}}}return c(e,t,{walkable:n,ignore:r})}function Ke(e,t){return We(e,t,{walkable:["props","children","child","sibling"]})}function ge(e){let{label:t,icon:n,noPadding:r=!1,children:o}=e;const[a,c]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(p.FormRow,{label:t,leading:n&&React.createElement(p.FormRow.Icon,{source:s(n)}),trailing:React.createElement(p.FormRow.Arrow,{style:{transform:[{rotate:`${a?180:90}deg`}]},source:s("down_arrow")}),onPress:function(){return c(!a)}}),!a&&React.createElement(React.Fragment,null,React.createElement(p.FormDivider,null),React.createElement(u.View,{style:!r&&{paddingHorizontal:15}},o)))}const p=d("Form","FormSection"),Je=d("Button","Text","View"),Qe=H("StaticSearchBarContainer");var Lt=Object.freeze({__proto__:null,Forms:p,General:Je,Search:Qe,Summary:ge}),b=J(M(K("VENDETTA_SETTINGS")));const y=J(M(Le("vendetta_loader.json"))),{FormRow:w,FormSection:Bt,FormDivider:Ye}=p;function xt(){const e=L.useNavigation();return F(b),React.createElement(Bt,{key:"Vendetta",title:"Vendetta"},React.createElement(w,{label:"General",leading:React.createElement(w.Icon,{source:s("settings")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaSettings")}}),React.createElement(Ye,null),React.createElement(w,{label:"Plugins",leading:React.createElement(w.Icon,{source:s("debug")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaPlugins")}}),b.developerSettings&&React.createElement(React.Fragment,null,React.createElement(Ye,null),React.createElement(w,{label:"Developer",leading:React.createElement(w.Icon,{source:s("ic_progress_wrench_24px")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaDeveloper")}})))}const qe="n9QQ4XhhJP",Xe="https://github.com/vendetta-mod";var Mt=Object.freeze({__proto__:null,DISCORD_SERVER:qe,GITHUB:Xe});function X(e){try{Se.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}const{FormRow:Ze,FormText:Nt}=p;function et(e){let{label:t,version:n,icon:r}=e;return React.createElement(Ze,{label:t,leading:React.createElement(Ze.Icon,{source:s(r)}),trailing:React.createElement(Nt,null,n),onPress:function(){X(`${t} - ${n}`),h("Copied version to clipboard.",s("toast_copy_link"))}})}const{FormRow:E,FormSwitchRow:jt,FormSection:pe,FormDivider:N}=p,f=Fe();function Ut(){F(b);const e=[{label:"Vendetta",version:f.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${f.discord.version} (${f.discord.build})`,icon:"Discord"},{label:"React",version:f.react.version,icon:"ic_category_16px"},{label:"React Native",version:f.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:f.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:f.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${f.os.name} ${f.os.version}`,icon:"ic_cog_24px"},...f.os.sdk?[{label:"SDK",version:f.os.sdk,icon:"ic_profile_badge_verified_developer_color"}]:[],{label:"Manufacturer",version:f.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:f.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:f.device.model,icon:"ic_phonelink_24px"},{label:u.Platform.select({android:"Codename",ios:"Machine ID"}),version:f.device.codename,icon:"ic_compose_24px"}];return React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(pe,{title:"Links",titleStyleType:"no_border"},React.createElement(E,{label:"Discord Server",leading:React.createElement(E.Icon,{source:s("Discord")}),trailing:E.Arrow,onPress:function(){return $e.acceptInviteAndTransitionToInviteChannel({inviteKey:qe})}}),React.createElement(N,null),React.createElement(E,{label:"GitHub",leading:React.createElement(E.Icon,{source:s("img_account_sync_github_white")}),trailing:E.Arrow,onPress:function(){return Ee.openURL(Xe)}})),React.createElement(pe,{title:"Actions"},React.createElement(E,{label:"Reload Discord",leading:React.createElement(E.Icon,{source:s("ic_message_retry")}),onPress:function(){return u.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(N,null),React.createElement(jt,{label:"Developer Settings",leading:React.createElement(E.Icon,{source:s("ic_progress_wrench_24px")}),value:b.developerSettings,onValueChange:function(n){b.developerSettings=n}})),React.createElement(pe,{title:"Info"},React.createElement(ge,{label:"Versions",icon:"ic_information_filled_24px"},e.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(et,{label:n.label,version:n.version,icon:n.icon}),r!==e.length-1&&React.createElement(N,null))})),React.createElement(N,null),React.createElement(ge,{label:"Platform",icon:"ic_mobile_device"},t.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(et,{label:n.label,version:n.version,icon:n.icon}),r!==t.length-1&&React.createElement(N,null))}))))}const Z=d("SemanticColor"),ee=z.ThemeColorMap??Z?.default?.colors??Z?.SemanticColor,zt=z.Colors??Z?.default?.unsafe_rawColors??Z?.RawColor;var Gt=Object.freeze({__proto__:null,rawColors:zt,semanticColors:ee});const Ht=d("show","openLazy","close"),{FormRow:he,FormSwitch:Wt}=p,{TouchableOpacity:te,Image:ne}=Je,C=V.createThemedStyleSheet({card:{backgroundColor:ee?.BACKGROUND_SECONDARY,borderRadius:5,marginHorizontal:10,marginBottom:10},header:{padding:0,backgroundColor:ee?.BACKGROUND_TERTIARY,borderTopLeftRadius:5,borderTopRightRadius:5},actions:{flexDirection:"row-reverse",alignItems:"center"},icon:{width:22,height:22,marginLeft:5,tintColor:ee?.INTERACTIVE_NORMAL}});function Kt(e){let{plugin:t}=e;const n=He(t.id),r=L.useNavigation(),[o,a]=React.useState(!1);return o?null:React.createElement(u.View,{style:C.card},React.createElement(he,{style:C.header,label:`${t.manifest.name} by ${t.manifest.authors.map(function(c){return c.name}).join(", ")}`,leading:React.createElement(he.Icon,{source:s(t.manifest.vendetta?.icon||"ic_application_command_24px")}),trailing:React.createElement(Wt,{style:u.Platform.OS==="android"&&{marginVertical:-15},value:t.enabled,onValueChange:function(c){try{c?Y(t.id):q(t.id)}catch(i){h(i.message,s("Small"))}}})}),React.createElement(he,{label:t.manifest.description,trailing:React.createElement(u.View,{style:C.actions},React.createElement(te,{onPress:function(){return Ht.show({title:"Wait!",body:`Are you sure you wish to delete ${t.manifest.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){try{ze(t.id),a(!0)}catch(c){h(c.message,s("Small"))}}})}},React.createElement(ne,{style:C.icon,source:s("ic_message_delete")})),React.createElement(te,{onPress:function(){X(t.id),h("Copied plugin URL to clipboard.",s("toast_copy_link"))}},React.createElement(ne,{style:C.icon,source:s("copy")})),React.createElement(te,{onPress:function(){t.update=!t.update,h(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,s("toast_image_saved"))}},React.createElement(ne,{style:C.icon,source:s(t.update?"Check":"Small")})),n&&React.createElement(te,{onPress:function(){return r.push("VendettaCustomPage",{title:t.manifest.name,render:n})}},React.createElement(ne,{style:C.icon,source:s("settings")})))}))}const{FormInput:Jt,FormRow:tt}=p;function Qt(){F(m);const[e,t]=React.useState("");return React.createElement(u.View,{style:{flex:1}},React.createElement(Jt,{value:e,onChange:function(n){return t(n)},placeholder:"https://example.com/",title:"PLUGIN URL"}),React.createElement(tt,{label:"Install plugin",leading:React.createElement(tt.Icon,{source:s("ic_add_24px")}),onPress:function(){je(e).then(function(){t("")}).catch(function(n){h(n.message,s("Small"))})}}),React.createElement(u.FlatList,{style:{marginTop:10},data:Object.values(m),renderItem:function(n){let{item:r}=n;return React.createElement(Kt,{plugin:r})},keyExtractor:function(n){return n.id}}))}const{FormSection:ve,FormRow:_,FormSwitchRow:nt,FormInput:rt,FormDivider:re}=p;V.createThemedStyleSheet({code:{fontFamily:z.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,fontSize:12}});function Yt(){const e=L.useNavigation();return F(b),F(y),React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(ve,{title:"Debug",titleStyleType:"no_border"},React.createElement(rt,{value:b.debuggerUrl,onChange:function(t){return b.debuggerUrl=t},placeholder:"127.0.0.1:9090",title:"DEBUGGER URL"}),React.createElement(re,null),React.createElement(_,{label:"Connect to debug websocket",leading:React.createElement(_.Icon,{source:s("copy")}),onPress:function(){return Ae(b.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(re,null),React.createElement(_,{label:"Connect to React DevTools",leading:React.createElement(_.Icon,{source:s("ic_badge_staff")}),onPress:function(){try{window.__vendetta_rdc?.connectToDevTools({host:b.debuggerUrl.split(":")?.[0],resolveRNStyle:u.StyleSheet.flatten})}catch(t){D.error("Failed to connect to React DevTools!",t),h("Failed to connect to React DevTools!",s("Small"))}}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(ve,{title:"Loader config"},React.createElement(nt,{label:"Load from custom url",subLabel:"Load Vendetta from a custom endpoint.",leading:React.createElement(_.Icon,{source:s("copy")}),value:y.customLoadUrl.enabled,onValueChange:function(t){y.customLoadUrl.enabled=t}}),React.createElement(re,null),y.customLoadUrl.enabled&&React.createElement(React.Fragment,null,React.createElement(rt,{value:y.customLoadUrl.url,onChange:function(t){return y.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",title:"VENDETTA URL"}),React.createElement(re,null)),window.__vendetta_loader.features.devtools&&React.createElement(nt,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,leading:React.createElement(_.Icon,{source:s("ic_badge_staff")}),value:y.loadReactDevTools,onValueChange:function(t){y.loadReactDevTools=t}})),React.createElement(ve,{title:"Other"},React.createElement(_,{label:"Asset Browser",leading:React.createElement(_.Icon,{source:s("ic_media_upload")}),trailing:_.Arrow,onPress:function(){return e.push("VendettaAssetBrowser")}})))}const{FormRow:qt}=p,Xt=V.createThemedStyleSheet({asset:{width:32,height:32}});function Zt(e){let{asset:t}=e;return React.createElement(qt,{label:`${t.name} - ${t.id}`,trailing:React.createElement(u.Image,{source:t.id,style:Xt.asset}),onPress:function(){X(t.name),h("Copied asset name to clipboard.",s("toast_copy_link"))}})}const{FormDivider:en}=p,tn=V.createThemedStyleSheet({search:{margin:0,padding:15,borderBottomWidth:0,background:"none",backgroundColor:"none"}});function nn(){const[e,t]=React.useState("");return React.createElement(u.View,{style:{flex:1}},React.createElement(Qe,{style:tn.search,onChangeText:function(n){return t(n)},placeholder:"Search"}),React.createElement(u.FlatList,{data:Object.values($).filter(function(n){return n.name.includes(e)||n.id.toString()===e}),renderItem:function(n){let{item:r}=n;return React.createElement(React.Fragment,null,React.createElement(Zt,{asset:r}),React.createElement(en,null))},keyExtractor:function(n){return n.name}}))}const rn=H("getScreens",!1),on=H("UserSettingsOverviewWrapper",!1);function an(){const e=new Array;return e.push(S("default",rn,function(t,n){return{...n,VendettaSettings:{title:"Vendetta",render:Ut},VendettaPlugins:{title:"Plugins",render:Qt},VendettaDeveloper:{title:"Developer",render:Yt},VendettaAssetBrowser:{title:"Asset Browser",render:nn},VendettaCustomPage:{title:"Vendetta Page",render:function(r){let{render:o,...a}=r;const c=L.useNavigation();return React.useEffect(function(){return a&&c.setOptions(a)}),React.createElement(o,null)}}}})),S("default",on,function(t,n){const r=Ke(n.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});e.push(S("renderSupportAndAcknowledgements",r.type.prototype,function(o,a){let{props:{children:c}}=a;const i=c.findIndex(function(l){return l?.type?.name==="UploadLogsButton"});i!==-1&&c.splice(i,1)})),e.push(S("render",r.type.prototype,function(o,a){let{props:{children:c}}=a;const i=[le.Messages.BILLING_SETTINGS,le.Messages.PREMIUM_SETTINGS],l=c.findIndex(function(g){return i.includes(g.props.title)});c.splice(l===-1?4:l,0,React.createElement(xt,null))}))},!0),function(){return e.forEach(function(t){return t()})}}const cn=d("updateTheme","overrideTheme"),ot=d("setAMOLEDThemeEnabled"),at=ie("ThemeStore"),ln=ie("UnsyncedUserSettingsStore");function ct(){const e=at.theme||"dark";cn.overrideTheme(e),ot&&ln.useAMOLEDTheme===2&&ot.setAMOLEDThemeEnabled(!0),ue.unsubscribe("I18N_LOAD_START",ct)}function sn(){try{at&&ue.subscribe("I18N_LOAD_START",ct)}catch(e){D.error("Failed to fix theme...",e)}}function un(e){return Object.isFrozen(e)?Object.assign({},e):e}var dn=Object.freeze({__proto__:null,copyText:X,findInReactTree:Ke,findInTree:We,safeFetch:fe,unfreeze:un});function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o={...e};return n.forEach(function(a){return delete o[a]}),o}async function mn(e){return{patcher:oe(Et,"unpatchAll"),metro:{...ut,common:{...ht}},constants:Mt,utils:dn,debug:oe(It,"versionHash","patchLogHook"),ui:{components:Lt,toasts:Tt,assets:Dt,...Gt},plugins:oe(Vt,"initPlugins"),commands:oe(At,"patchCommands"),storage:Ot,settings:b,loader:{identity:window.__vendetta_loader,config:y},logger:D,version:me,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}console.log("Hello from Vendetta!"),async function(){try{const e=await Promise.all([Ce(),Ie(),Oe(),sn(),an()]);window.vendetta=await mn(e),e.push(await Ge()),D.log("Vendetta is ready!")}catch(e){alert(`Vendetta failed to initialize... ${e.stack||e.toString()}`)}}()})();
//# sourceURL=Vendetta