(function(){"use strict";const H=function(e){return Object.values(window.modules).find(function(t){return t?.publicModule.exports?.[e]})?.publicModule?.exports};window.React=H("createElement");const u=H("Text"),W=H("AbortCodes"),K=H("isMoment");function Se(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(const e in window.modules){const t=Number(e),n=window.modules[t]?.publicModule?.exports;if(!n||n===window||n.proxygone===null){Se(t);continue}}const $e=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(n){const r=[],o=K?.locale();for(const a in e){const c=Number(a),i=e[c]?.publicModule?.exports;if(!e[c].isInitialized)try{__r(c),o&&o!==K.locale()&&K.locale(o)}catch{}if(!i){Se(c);continue}try{if(i.default&&i.__esModule&&n(i.default)){if(t)return i.default;r.push(i.default)}if(n(i)){if(t)return i;r.push(i)}}catch(l){console.error(`Failed to filter modules... ${l.stack||l.toString()}`)}}if(!t)return r}},se=window.modules,V=$e(se,!0),ue=$e(se),De=function(e){return function(t){return e.every(function(n){return t[n]!==void 0})}},Te=function(e,t){return t?function(n){return n?.name===e}:function(n){return n?.default?.name===e}},mt=function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return V(De(t))},gt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue(De(t))},J=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return V(Te(e,t))},pt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ue(Te(e,t))},de=function(e){return V(mt(e))};var ht=Object.freeze({__proto__:null,find:V,findAll:ue,findByDisplayName:J,findByDisplayNameAll:pt,findByProps:d,findByPropsAll:gt,findByStoreName:de,modules:se});const vt=d("getVoiceChannelId"),fe=d("Messages"),Ie=d("openURL"),Pe=V(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop}),B=d("createThemedStyleSheet"),Oe=d("setString","getString","hasString"),Y=d("registerAsset"),Ce=d("acceptInviteAndTransitionToInviteChannel"),me=d("getBuiltInCommands"),yt=d("pushLazy"),bt=d("createStackNavigator"),L=d("NavigationContainer"),Rt=d("connectStores"),ge=d("_currentDispatchActionType"),F=window.React;var wt=Object.freeze({__proto__:null,Flux:Rt,FluxDispatcher:ge,NavigationNative:L,React:F,ReactNative:u,assets:Y,channels:vt,clipboard:Oe,commands:me,constants:W,i18n:fe,invites:Ce,moment:K,navigation:yt,navigationStack:bt,stylesheet:B,toasts:Pe,url:Ie});const Ae=["a","b","i"],O=new Map;function Et(e,t,n,r,o){const a=O.get(t)?.[e];if(!a)return o?Reflect.construct(t[e],n,r):t[e].apply(r,n);for(const l of a.b.values()){const p=l.call(r,n);Array.isArray(p)&&(n=p)}let c=(...l)=>o?Reflect.construct(a.o,l,r):a.o.apply(r,l);for(const l of a.i.values()){const p=c;c=(...I)=>l.call(r,I,p)}let i=c(...n);for(const l of a.a.values())i=l.call(r,n,i)??i;return i}function Fe(e,t,n,r){const o=O.get(e),a=o?.[t];return a?.[r].has(n)?(a[r].delete(n),Ae.every(c=>a[c].size===0)&&(Reflect.defineProperty(e,t,{value:a.o,writable:!0,configurable:!0})||(e[t]=a.o),delete o[t]),Object.keys(o).length==0&&O.delete(e),!0):!1}function _t(){for(const[e,t]of O.entries())for(const n in t)for(const r of Ae)for(const o of t[n]?.[r].keys()??[])Fe(e,n,o,r)}var pe=e=>(t,n,r,o=!1)=>{if(typeof n[t]!="function")throw new Error(`${t} is not a function in ${n.constructor.name}`);O.has(n)||O.set(n,{});const a=O.get(n);if(!a[t]){const l=n[t];a[t]={o:l,b:new Map,i:new Map,a:new Map};const p=(b,P,G)=>{const $n=Et(t,n,P,b,G);return o&&i(),$n},I=new Proxy(l,{apply:(b,P,G)=>p(P,G,!1),construct:(b,P)=>p(l,P,!0),get:(b,P,G)=>P=="toString"?l.toString.bind(l):Reflect.get(b,P,G)});Reflect.defineProperty(n,t,{value:I,configurable:!0,writable:!0})||(n[t]=I)}const c=Symbol(),i=()=>Fe(n,t,c,e);return a[t][e].set(c,r),i};const St=pe("b"),$t=pe("i"),S=pe("a");var Dt=Object.freeze({__proto__:null,after:S,before:St,instead:$t,unpatchAll:_t}),Tt={...Dt};const $={};function ke(){const e=S("registerAsset",Y,function(t,n){const r=t[0];$[r.name]={...r,id:n}});for(let t=1;;t++){const n=Y.getAssetByID(t);if(!n)break;$[n.name]||($[n.name]={...n,id:t})}return e}const It=function(e){return Object.values($).find(e)},Pt=function(e){return $[e]},Ot=function(e){return Y.getAssetByID(e)},s=function(e){return $[e]?.id};var Ct=Object.freeze({__proto__:null,all:$,find:It,getAssetByID:Ot,getAssetByName:Pt,getAssetIDByName:s,patchAssets:ke});function h(e,t){return Pe.open({content:e,source:t})}var At=Object.freeze({__proto__:null,showToast:h});const xe=d("setLogFn").default,D=new xe("Vendetta");let v;function Ve(e){if(v!==void 0&&v.readyState!==WebSocket.CLOSED&&v.close(),e===""){h("Invalid debugger URL!",s("Small"));return}v=new WebSocket(`ws://${e}`),v.addEventListener("open",function(){return h("Connected to debugger.",s("Check"))}),v.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(n){console.error(n)}}),v.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),h("An error occurred with the debugger connection!",s("Small"))})}function Be(){const e=S("nativeLoggingHook",globalThis,function(t){v?.readyState===WebSocket.OPEN&&v.send(JSON.stringify({message:t[0],level:t[1]})),D.log(t[0])});return function(){v&&v.close(),e()}}const he="c3f7d60";function Le(){const e=u.NativeModules.InfoDictionaryManager,t=u.NativeModules.DCDDeviceManager,n=window.HermesInternal.getRuntimeProperties(),r=n["OSS Release Version"],o="for RN ",a=u.Platform.constants,c=a.reactNativeVersion;return{vendetta:{version:he,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:e.Version,build:e.Build},react:{version:React.version,nativeVersion:r.startsWith(o)?r.substring(o.length):`${c.major}.${c.minor}.${c.patch}`},hermes:{version:r,buildType:n.Build,bytecodeVersion:n["Bytecode Version"]},...u.Platform.select({android:{os:{name:"Android",version:a.Release,sdk:a.Version}},ios:{os:{name:a.systemName,version:a.osVersion}}}),...u.Platform.select({android:{device:{manufacturer:a.Manufacturer,brand:a.Brand,model:a.Model,codename:t.device}},ios:{device:{manufacturer:t.deviceManufacturer,brand:t.deviceBrand,model:t.deviceModel,codename:t.device}}})}}var Ft=Object.freeze({__proto__:null,connectToDebugger:Ve,getDebugInfo:Le,patchLogHook:Be,get socket(){return v},versionHash:he});let j=[];function je(){const e=S("getBuiltInCommands",me,function(t,n){return n.concat(j)});return function(){j=[],e()}}function kt(e){const t=me.getBuiltInCommands(1,!0,!1);t.sort(function(r,o){return parseInt(o.id)-parseInt(r.id)});const n=t[t.length-1];return e.id=(parseInt(n.id,10)-1).toString(),j.push(e),function(){return j=j.filter(function(r){let{id:o}=r;return o!==e.id})}}var xt=Object.freeze({__proto__:null,patchCommands:je,registerCommand:kt});const Vt=Object.freeze({GET:"GET",SET:"SET",DEL:"DEL"});function Bt(){return{listeners:Object.values(Vt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var n=this;const r=function(o,a){n.off(o,r),t(o,a)};this.on(e,r)},emit(e,t){for(const n of this.listeners[e])n(e,t)}}}const Me=u.NativeModules.MMKVManager,M=u.NativeModules.DCDFileManager,Ne=u.Platform.select({default:function(e){return e},ios:function(e){return`Documents/${e}`}}),Q=function(e){return{get:async function(){return JSON.parse(await Me.getItem(e)??"{}")},set:function(t){return Me.setItem(e,JSON.stringify(t))}}},Ue=function(e){let t;return{get:async function(){const n=`${M.getConstants().DocumentsDirPath}/${e}`;return!t&&!await M.fileExists(n)?(t=!0,M.writeFile("documents",Ne(e),"{}","utf8")):JSON.parse(await M.readFile(n,"utf8"))},set:function(n){return void M.writeFile("documents",Ne(e),JSON.stringify(n),"utf8")}}};u.NativeModules.MMKVManager;const ze=Symbol("emitter accessor"),Ge=Symbol("wrapSync promise accessor");function He(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Bt();function n(r,o){return new Proxy(r,{get(a,c){if(c===ze)return t;const i=[...o,c],l=a[c];return l!=null?(t.emit("GET",{path:i,value:l}),typeof l=="object"?n(l,i):l):l},set(a,c,i){return a[c]=i,t.emit("SET",{path:[...o,c],value:i}),!0},deleteProperty(a,c){const i=delete a[c];return i&&t.emit("DEL",{path:[...o,c]}),i}})}return{proxy:n(e,[]),emitter:t}}function k(e){const t=e[ze],[,n]=React.useReducer(function(r){return~r},0);return React.useEffect(function(){const r=function(){return n()};return t.on("SET",r),t.on("DEL",r),function(){t.off("SET",r),t.off("DEL",r)}},[]),e}async function N(e){const t=await e.get(),{proxy:n,emitter:r}=He(t),o=function(){return e.set(n)};return r.on("SET",o),r.on("DEL",o),n}function q(e){let t;const n=[],r=function(o){return t?o():n.push(o)};return e.then(function(o){t=o,n.forEach(function(a){return a()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(o){return[o,function(a){for(var c=arguments.length,i=new Array(c>1?c-1:0),l=1;l<c;l++)i[l-1]=arguments[l];return Reflect[o](t??a,...i)}]})),get(o,a,c){return a===Ge?r:Reflect.get(t??o,a,c)}})}const We=function(e){return new Promise(function(t){return e[Ge](t)})};var Lt=Object.freeze({__proto__:null,awaitSyncWrapper:We,createFileBackend:Ue,createMMKVBackend:Q,createProxy:He,createStorage:N,useProxy:k,wrapSync:q});async function ve(e,t){const n=await fetch(e,t);if(!n.ok)throw new Error("Request returned non-ok");return n}const f=q(N(Q("VENDETTA_PLUGINS"))),C={};async function X(e){e.endsWith("/")||(e+="/");const t=f[e];let n;try{n=await(await ve(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}let r;if(t?.manifest.hash!==n.hash)try{r=await(await ve(e+(n.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!r&&!t)throw new Error(`Failed to fetch JS for ${e}`);f[e]={id:e,manifest:n,enabled:t?.enabled??!1,update:t?.update??!0,js:r??t.js}}async function Ke(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in f)throw new Error("Plugin already installed");await X(e),t&&await Z(e)}async function Je(e){const t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await N(Q(e.id))},logger:new xe(`Vendetta \xBB ${e.manifest.name}`)},n=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,r=(0,eval)(n)(t),o=typeof r=="function"?r():r;return o.default||o}async function Z(e){e.endsWith("/")||(e+="/");const t=f[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{const n=await Je(t);C[e]=n,n.onLoad?.(),t.enabled=!0}catch(n){D.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,n);try{C[t.id]?.onUnload?.()}catch(r){D.error(`Plugin ${t.id} errored whilst unloading`,r)}delete C[e],t.enabled=!1}}function ee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");const n=f[e],r=C[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!r)throw new Error("Attempted to stop a non-started plugin");try{r.onUnload?.()}catch(o){D.error(`Plugin ${n.id} errored whilst unloading`,o)}delete C[e],t&&(n.enabled=!1)}function Ye(e){e.endsWith("/")||(e+="/"),f[e].enabled&&ee(e),delete f[e]}async function Qe(){await We(f);const e=Object.keys(f);return await Promise.allSettled(e.filter(function(t){return f[t].enabled&&f[t].update}).map(function(t){return X(t)})),await Promise.allSettled(e.filter(function(t){return f[t].enabled}).map(function(t){return Z(t)})),e.filter(function(t){return!f[t].enabled&&f[t].update}).forEach(function(t){return X(t)}),jt}const jt=function(){return Object.keys(C).forEach(function(e){return ee(e,!1)})},qe=function(e){return C[e]?.settings};var Mt=Object.freeze({__proto__:null,evalPlugin:Je,fetchPlugin:X,getSettings:qe,initPlugins:Qe,installPlugin:Ke,plugins:f,removePlugin:Ye,startPlugin:Z,stopPlugin:ee});function Xe(e,t){let{walkable:n=[],ignore:r=[],maxDepth:o=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0;function c(i,l){let{walkable:p=[],ignore:I=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(a+=1,!(a>o)){if(typeof l=="string"){if(i.hasOwnProperty(l))return i[l]}else if(l(i))return i;if(i){if(Array.isArray(i))for(const x of i){const b=c(x,l,{walkable:p,ignore:I});if(b)return b}else if(typeof i=="object"){for(const x of Object.keys(i))if(!(p!=null&&p.includes(x))&&!I.includes(x))try{const b=c(i[x],l,{walkable:p,ignore:I});if(b)return b}catch{}}}}}return c(e,t,{walkable:n,ignore:r})}function Ze(e,t){return Xe(e,t,{walkable:["props","children","child","sibling"]})}function ye(e){let{label:t,icon:n,noPadding:r=!1,children:o}=e;const[a,c]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(m.FormRow,{label:t,leading:n&&React.createElement(m.FormRow.Icon,{source:s(n)}),trailing:React.createElement(m.FormRow.Arrow,{style:{transform:[{rotate:`${a?180:90}deg`}]},source:s("down_arrow")}),onPress:function(){return c(!a)}}),!a&&React.createElement(React.Fragment,null,React.createElement(m.FormDivider,null),React.createElement(u.View,{style:!r&&{paddingHorizontal:15}},o)))}const m=d("Form","FormSection"),et=d("Button","Text","View"),tt=J("StaticSearchBarContainer");var Nt=Object.freeze({__proto__:null,ErrorBoundary:T,Forms:m,General:et,Search:tt,Summary:ye});const te=d("SemanticColor"),U=W.ThemeColorMap??te?.default?.colors??te?.SemanticColor,Ut=W.Colors??te?.default?.unsafe_rawColors??te?.RawColor;var zt=Object.freeze({__proto__:null,rawColors:Ut,semanticColors:U});function Gt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(e)}function Wt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function Kt(e,t){return t&&(Jt(t)==="object"||typeof t=="function")?t:Gt(e)}function be(e,t){return be=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},be(e,t)}var Jt=function(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e};function Yt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qt(e){var t=Yt();return function(){var n=ne(e),r;if(t){var o=ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Kt(this,r)}}const re=d("Looks","Colors","Sizes"),Re=B.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5},codeblock:{fontFamily:W.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,fontSize:12,backgroundColor:U.BACKGROUND_SECONDARY,padding:5,borderRadius:5,marginBottom:5}});let T=function(e){Wt(n,e);var t=Qt(n);function n(o){Ht(this,n);var a;return a=t.call(this,o),a.state={hasErr:!1},a}var r=n.prototype;return r.render=function(){var o=this;return this.state.hasErr?F.createElement(u.ScrollView,{style:Re.view},F.createElement(m.FormText,{style:Re.title},"Uh oh."),F.createElement(m.FormText,{style:Re.codeblock},this.state.errText),F.createElement(re,{color:re.Colors.RED,size:re.Sizes.MEDIUM,look:re.Looks.FILLED,onPress:function(){return o.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},n}(F.Component);T.getDerivedStateFromError=function(e){return{hasErr:!0,errText:e.message}};var y=q(N(Q("VENDETTA_SETTINGS")));const R=q(N(Ue("vendetta_loader.json"))),{FormRow:w,FormSection:qt,FormDivider:nt}=m;function Xt(){const e=L.useNavigation();return k(y),React.createElement(T,null,React.createElement(qt,{key:"Vendetta",title:"Vendetta"},React.createElement(w,{label:"General",leading:React.createElement(w.Icon,{source:s("settings")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaSettings")}}),React.createElement(nt,null),React.createElement(w,{label:"Plugins",leading:React.createElement(w.Icon,{source:s("debug")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaPlugins")}}),y.developerSettings&&React.createElement(React.Fragment,null,React.createElement(nt,null),React.createElement(w,{label:"Developer",leading:React.createElement(w.Icon,{source:s("ic_progress_wrench_24px")}),trailing:w.Arrow,onPress:function(){return e.push("VendettaDeveloper")}}))))}const rt="n9QQ4XhhJP",ot="https://github.com/vendetta-mod";var Zt=Object.freeze({__proto__:null,DISCORD_SERVER:rt,GITHUB:ot});function oe(e){try{Oe.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}const{FormRow:at,FormText:en}=m;function ct(e){let{label:t,version:n,icon:r}=e;return React.createElement(at,{label:t,leading:React.createElement(at.Icon,{source:s(r)}),trailing:React.createElement(en,null,n),onPress:function(){oe(`${t} - ${n}`),h("Copied version to clipboard.",s("toast_copy_link"))}})}const{FormRow:E,FormSwitchRow:tn,FormSection:we,FormDivider:z}=m,g=Le();function nn(){k(y);const e=[{label:"Vendetta",version:g.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${g.discord.version} (${g.discord.build})`,icon:"Discord"},{label:"React",version:g.react.version,icon:"ic_category_16px"},{label:"React Native",version:g.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:g.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:g.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${g.os.name} ${g.os.version}`,icon:"ic_cog_24px"},...g.os.sdk?[{label:"SDK",version:g.os.sdk,icon:"ic_profile_badge_verified_developer_color"}]:[],{label:"Manufacturer",version:g.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:g.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:g.device.model,icon:"ic_phonelink_24px"},{label:u.Platform.select({android:"Codename",ios:"Machine ID"}),version:g.device.codename,icon:"ic_compose_24px"}];return React.createElement(T,null,React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(we,{title:"Links",titleStyleType:"no_border"},React.createElement(E,{label:"Discord Server",leading:React.createElement(E.Icon,{source:s("Discord")}),trailing:E.Arrow,onPress:function(){return Ce.acceptInviteAndTransitionToInviteChannel({inviteKey:rt})}}),React.createElement(z,null),React.createElement(E,{label:"GitHub",leading:React.createElement(E.Icon,{source:s("img_account_sync_github_white")}),trailing:E.Arrow,onPress:function(){return Ie.openURL(ot)}})),React.createElement(we,{title:"Actions"},React.createElement(E,{label:"Reload Discord",leading:React.createElement(E.Icon,{source:s("ic_message_retry")}),onPress:function(){return u.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(z,null),React.createElement(tn,{label:"Developer Settings",leading:React.createElement(E.Icon,{source:s("ic_progress_wrench_24px")}),value:y.developerSettings,onValueChange:function(n){y.developerSettings=n}})),React.createElement(we,{title:"Info"},React.createElement(ye,{label:"Versions",icon:"ic_information_filled_24px"},e.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(ct,{label:n.label,version:n.version,icon:n.icon}),r!==e.length-1&&React.createElement(z,null))})),React.createElement(z,null),React.createElement(ye,{label:"Platform",icon:"ic_mobile_device"},t.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(ct,{label:n.label,version:n.version,icon:n.icon}),r!==t.length-1&&React.createElement(z,null))})))))}const rn=d("show","openLazy","close"),{FormRow:Ee,FormSwitch:on}=m,{TouchableOpacity:ae,Image:ce}=et,A=B.createThemedStyleSheet({card:{backgroundColor:U?.BACKGROUND_SECONDARY,borderRadius:5,marginHorizontal:10,marginBottom:10},header:{padding:0,backgroundColor:U?.BACKGROUND_TERTIARY,borderTopLeftRadius:5,borderTopRightRadius:5},actions:{flexDirection:"row-reverse",alignItems:"center"},icon:{width:22,height:22,marginLeft:5,tintColor:U?.INTERACTIVE_NORMAL}});function an(e){let{plugin:t}=e;const n=qe(t.id),r=L.useNavigation(),[o,a]=React.useState(!1);return o?null:React.createElement(u.View,{style:A.card},React.createElement(Ee,{style:A.header,label:`${t.manifest.name} by ${t.manifest.authors.map(function(c){return c.name}).join(", ")}`,leading:React.createElement(Ee.Icon,{source:s(t.manifest.vendetta?.icon||"ic_application_command_24px")}),trailing:React.createElement(on,{style:u.Platform.OS==="android"&&{marginVertical:-15},value:t.enabled,onValueChange:function(c){try{c?Z(t.id):ee(t.id)}catch(i){h(i.message,s("Small"))}}})}),React.createElement(Ee,{label:t.manifest.description,trailing:React.createElement(u.View,{style:A.actions},React.createElement(ae,{onPress:function(){return rn.show({title:"Wait!",body:`Are you sure you wish to delete ${t.manifest.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){try{Ye(t.id),a(!0)}catch(c){h(c.message,s("Small"))}}})}},React.createElement(ce,{style:A.icon,source:s("ic_message_delete")})),React.createElement(ae,{onPress:function(){oe(t.id),h("Copied plugin URL to clipboard.",s("toast_copy_link"))}},React.createElement(ce,{style:A.icon,source:s("copy")})),React.createElement(ae,{onPress:function(){t.update=!t.update,h(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,s("toast_image_saved"))}},React.createElement(ce,{style:A.icon,source:s(t.update?"Check":"Small")})),n&&React.createElement(ae,{onPress:function(){return r.push("VendettaCustomPage",{title:t.manifest.name,render:n})}},React.createElement(ce,{style:A.icon,source:s("settings")})))}))}const{FormInput:cn,FormRow:it}=m;function ln(){k(f);const[e,t]=React.useState("");return React.createElement(T,null,React.createElement(u.View,{style:{flex:1}},React.createElement(cn,{value:e,onChange:function(n){return t(n)},placeholder:"https://example.com/",title:"PLUGIN URL"}),React.createElement(it,{label:"Install plugin",leading:React.createElement(it.Icon,{source:s("ic_add_24px")}),onPress:function(){Ke(e).then(function(){t("")}).catch(function(n){h(n.message,s("Small"))})}}),React.createElement(u.FlatList,{style:{marginTop:10},data:Object.values(f),renderItem:function(n){let{item:r}=n;return React.createElement(an,{plugin:r})},keyExtractor:function(n){return n.id}})))}const{FormSection:_e,FormRow:_,FormSwitchRow:lt,FormInput:st,FormDivider:ie}=m;function sn(){const e=L.useNavigation();return k(y),k(R),React.createElement(T,null,React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(_e,{title:"Debug",titleStyleType:"no_border"},React.createElement(st,{value:y.debuggerUrl,onChange:function(t){return y.debuggerUrl=t},placeholder:"127.0.0.1:9090",title:"DEBUGGER URL"}),React.createElement(ie,null),React.createElement(_,{label:"Connect to debug websocket",leading:React.createElement(_.Icon,{source:s("copy")}),onPress:function(){return Ve(y.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(ie,null),React.createElement(_,{label:"Connect to React DevTools",leading:React.createElement(_.Icon,{source:s("ic_badge_staff")}),onPress:function(){try{window.__vendetta_rdc?.connectToDevTools({host:y.debuggerUrl.split(":")?.[0],resolveRNStyle:u.StyleSheet.flatten})}catch(t){D.error("Failed to connect to React DevTools!",t),h("Failed to connect to React DevTools!",s("Small"))}}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(_e,{title:"Loader config"},React.createElement(lt,{label:"Load from custom url",subLabel:"Load Vendetta from a custom endpoint.",leading:React.createElement(_.Icon,{source:s("copy")}),value:R.customLoadUrl.enabled,onValueChange:function(t){R.customLoadUrl.enabled=t}}),React.createElement(ie,null),R.customLoadUrl.enabled&&React.createElement(React.Fragment,null,React.createElement(st,{value:R.customLoadUrl.url,onChange:function(t){return R.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",title:"VENDETTA URL"}),React.createElement(ie,null)),window.__vendetta_loader.features.devtools&&React.createElement(lt,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,leading:React.createElement(_.Icon,{source:s("ic_badge_staff")}),value:R.loadReactDevTools,onValueChange:function(t){R.loadReactDevTools=t}})),React.createElement(_e,{title:"Other"},React.createElement(_,{label:"Asset Browser",leading:React.createElement(_.Icon,{source:s("ic_media_upload")}),trailing:_.Arrow,onPress:function(){return e.push("VendettaAssetBrowser")}}))))}const{FormRow:un}=m,dn=B.createThemedStyleSheet({asset:{width:32,height:32}});function fn(e){let{asset:t}=e;return React.createElement(un,{label:`${t.name} - ${t.id}`,trailing:React.createElement(u.Image,{source:t.id,style:dn.asset}),onPress:function(){oe(t.name),h("Copied asset name to clipboard.",s("toast_copy_link"))}})}const{FormDivider:mn}=m,gn=B.createThemedStyleSheet({search:{margin:0,padding:15,borderBottomWidth:0,background:"none",backgroundColor:"none"}});function pn(){const[e,t]=React.useState("");return React.createElement(T,null,React.createElement(u.View,{style:{flex:1}},React.createElement(tt,{style:gn.search,onChangeText:function(n){return t(n)},placeholder:"Search"}),React.createElement(u.FlatList,{data:Object.values($).filter(function(n){return n.name.includes(e)||n.id.toString()===e}),renderItem:function(n){let{item:r}=n;return React.createElement(React.Fragment,null,React.createElement(fn,{asset:r}),React.createElement(mn,null))},keyExtractor:function(n){return n.name}})))}const hn=J("getScreens",!1),vn=J("UserSettingsOverviewWrapper",!1);function yn(){const e=new Array;return e.push(S("default",hn,function(t,n){return{...n,VendettaSettings:{title:"Vendetta",render:nn},VendettaPlugins:{title:"Plugins",render:ln},VendettaDeveloper:{title:"Developer",render:sn},VendettaAssetBrowser:{title:"Asset Browser",render:pn},VendettaCustomPage:{title:"Vendetta Page",render:function(r){let{render:o,...a}=r;const c=L.useNavigation();return React.useEffect(function(){return a&&c.setOptions(a)}),React.createElement(T,null,React.createElement(o,null))}}}})),S("default",vn,function(t,n){const r=Ze(n.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});e.push(S("renderSupportAndAcknowledgements",r.type.prototype,function(o,a){let{props:{children:c}}=a;const i=c.findIndex(function(l){return l?.type?.name==="UploadLogsButton"});i!==-1&&c.splice(i,1)})),e.push(S("render",r.type.prototype,function(o,a){let{props:{children:c}}=a;const i=[fe.Messages.BILLING_SETTINGS,fe.Messages.PREMIUM_SETTINGS],l=c.findIndex(function(p){return i.includes(p.props.title)});c.splice(l===-1?4:l,0,React.createElement(Xt,null))}))},!0),function(){return e.forEach(function(t){return t()})}}const bn=d("updateTheme","overrideTheme"),ut=d("setAMOLEDThemeEnabled"),dt=de("ThemeStore"),Rn=de("UnsyncedUserSettingsStore");function ft(){const e=dt.theme||"dark";bn.overrideTheme(e),ut&&Rn.useAMOLEDTheme===2&&ut.setAMOLEDThemeEnabled(!0),ge.unsubscribe("I18N_LOAD_START",ft)}function wn(){try{dt&&ge.subscribe("I18N_LOAD_START",ft)}catch(e){D.error("Failed to fix theme...",e)}}function En(e){return Object.isFrozen(e)?Object.assign({},e):e}var _n=Object.freeze({__proto__:null,copyText:oe,findInReactTree:Ze,findInTree:Xe,safeFetch:ve,unfreeze:En});function le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o={...e};return n.forEach(function(a){return delete o[a]}),o}async function Sn(e){return{patcher:le(Tt,"unpatchAll"),metro:{...ht,common:{...wt}},constants:Zt,utils:_n,debug:le(Ft,"versionHash","patchLogHook"),ui:{components:Nt,toasts:At,assets:Ct,...zt},plugins:le(Mt,"initPlugins"),commands:le(xt,"patchCommands"),storage:Lt,settings:y,loader:{identity:window.__vendetta_loader,config:R},logger:D,version:he,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}console.log("Hello from Vendetta!"),async function(){try{const e=await Promise.all([Be(),ke(),je(),wn(),yn()]);window.vendetta=await Sn(e),e.push(await Qe()),D.log("Vendetta is ready!")}catch(e){alert(`Vendetta failed to initialize... ${e.stack||e.toString()}`)}}()})();
//# sourceURL=Vendetta