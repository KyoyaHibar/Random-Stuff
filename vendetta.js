"use strict";(()=>{var xe=Object.defineProperty;var R=(e,t)=>{for(var o in t)xe(e,o,{get:t[o],enumerable:!0})};var j={};R(j,{after:()=>b,before:()=>Ae,instead:()=>Ie,unpatchAll:()=>pe});var N=["a","b","i"],y=new Map;function le(e,t,o,r,c){let s=y.get(t)?.[e];if(!s)return c?Reflect.construct(t[e],o,r):t[e].apply(r,o);for(let i of s.b.values()){let m=i.call(r,o);Array.isArray(m)&&(o=m)}let a=(...i)=>c?Reflect.construct(s.o,i,r):s.o.apply(r,i);for(let i of s.i.values()){let m=a;a=(...x)=>i.call(r,x,m)}let n=a(...o);for(let i of s.a.values())n=i.call(r,o,n)??n;return n}function E(e,t,o,r){let c=y.get(e),s=c?.[t];return s?.[r].has(o)?(s[r].delete(o),N.every(a=>s[a].size===0)&&(Reflect.defineProperty(e,t,{value:s.o,writable:!0,configurable:!0})||(e[t]=s.o),delete c[t]),Object.keys(c).length==0&&y.delete(e),!0):!1}function pe(){for(let[e,t]of y.entries())for(let o in t)for(let r of N)for(let c of t[o]?.[r].keys()??[])E(e,o,c,r)}var _=e=>(t,o,r,c=!1)=>{if(typeof o[t]!="function")throw new Error(`${t} is not a function in ${o.constructor.name}`);y.has(o)||y.set(o,{});let s=y.get(o);if(!s[t]){let i=o[t];s[t]={o:i,b:new Map,i:new Map,a:new Map};let m=(f,A,B)=>{let we=le(t,o,A,f,B);return c&&n(),we},x=new Proxy(i,{apply:(f,A,B)=>m(A,B,!1),construct:(f,A)=>m(i,A,!0),get:(f,A,B)=>A=="toString"?i.toString.bind(i):Reflect.get(f,A,B)});Reflect.defineProperty(o,t,{value:x,configurable:!0,writable:!0})||(o[t]=x)}let a=Symbol(),n=()=>E(o,t,a,e);return s[t][e].set(a,r),n};var Ae=_("b"),Ie=_("i"),b=_("a");var me={...j};var G={};R(G,{filterModules:()=>U,find:()=>D,findAll:()=>C,findByDisplayName:()=>P,findByDisplayNameAll:()=>Re,findByProps:()=>p,findByPropsAll:()=>ve,modules:()=>H});function de(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(let e in window.modules){let t=Number(e),o=window.modules[t].publicModule.exports;if(!o||o===window||o.proxygone===null){de(t);continue}}window.React=Object.values(window.modules).find(e=>e.publicModule.exports.createElement).publicModule.exports;var $=Object.values(window.modules).find(e=>e.publicModule.exports.isMoment).publicModule.exports,U=(e,t=!1)=>o=>{let r=[],c=$?.locale();for(let s in e){let a=Number(s),n=e[a].publicModule.exports;if(!e[a].isInitialized)try{__r(a),c&&c!==$.locale()&&$.locale(c)}catch{}if(!n){de(a);continue}try{if(n.default&&n.__esModule&&o(n.default)){if(t)return n.default;r.push(n.default)}if(o(n)){if(t)return n;r.push(n)}}catch(i){console.error(`Failed to getModule... ${i.stack||i.toString()}`)}}if(!t)return r},H=window.modules,D=U(H,!0),C=U(H),fe=e=>t=>e.every(o=>t[o]!==void 0),ue=(e,t)=>t?o=>o.name===e:o=>o?.default?.name===e,p=(...e)=>D(fe(e)),ve=(...e)=>C(fe(e)),P=(e,t=!0)=>D(ue(e,t)),Re=(e,t=!0)=>C(ue(e,t));var Fe=p("setLogFn").default,Be=new Fe("Vendetta"),T=Be;var De=p("setString","getString");function I(e){try{De.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}function k(e,t,{walkable:o=[],ignore:r=[],maxDepth:c=100}={}){let s=0;function a(n,i,{walkable:m=[],ignore:x=[]}={}){if(s+=1,!(s>c)){if(typeof i=="string"){if(n.hasOwnProperty(i))return n[i]}else if(i(n))return n;if(!!n){if(Array.isArray(n))for(let v of n){let f=a(v,i,{walkable:m,ignore:x});if(f)return f}else if(typeof n=="object"){for(let v of Object.keys(n))if(!(m!=null&&m.includes(v))&&!x.includes(v))try{let f=a(n[v],i,{walkable:m,ignore:x});if(f)return f}catch{}}}}}return a(e,t,{walkable:o,ignore:r})}function M(e,t){return k(e,t,{walkable:["props","children","child","sibling"]})}var J={};R(J,{DISCORD_SERVER:()=>W,GITHUB:()=>z});var W="https://discord.gg/n9QQ4XhhJP",z="https://github.com/vendetta-mod";var X={};R(X,{AsyncStorage:()=>_e,React:()=>Me,ReactNative:()=>u,channels:()=>ke,constants:()=>Te,i18n:()=>O,toasts:()=>Q,url:()=>V});var Te=p("API_HOST"),ke=p("getVoiceChannelId"),O=p("Messages"),V=p("openURL"),Q=D(e=>e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop),Me=p("createElement"),u=p("Text","Image"),_e=p("setItem");var q={};R(q,{Forms:()=>g});var g=p("FormSection");var K={};R(K,{showToast:()=>S});function S(e,t){return Q.open({content:e,source:t})}var Y=p("registerAsset"),h={};function Z(){try{b("registerAsset",Y,(e,t)=>{let o=e[0];h[o.name]={...o,id:t}});for(let e=1;;e++){let t=Y.getAssetByID(e);if(!t)break;h[t.name]||(h[t.name]={...t,id:e})}}catch{}}var ge=e=>Object.values(h).find(e),ye=e=>h[e],be=e=>Y.getAssetByID(e),l=e=>h[e]?.id;var{FormRow:F,FormSection:Pe}=g;function ee({navigation:e}){return React.createElement(Pe,{key:"Vendetta",title:"Vendetta"},React.createElement(F,{label:"General",leading:()=>React.createElement(F.Icon,{source:l("settings")}),trailing:F.Arrow,onPress:()=>e.push("VendettaSettings")}),React.createElement(F,{label:"Asset Browser",leading:()=>React.createElement(F.Icon,{source:l("grid")}),trailing:F.Arrow,onPress:()=>e.push("VendettaAssetBrowser")}))}var w,Oe=eval;function L(e){if(w!==void 0&&w.readyState!==WebSocket.CLOSED&&w.close(),e===""){S("Invalid debugger URL!",l("Small"));return}w=new WebSocket(`ws://${e}`),w.addEventListener("open",()=>S("Connected to debugger.",l("Check"))),w.addEventListener("message",t=>{try{Oe(t.data)}catch(o){console.error(o)}}),w.addEventListener("error",t=>{console.log(`Debugger error: ${t.message}`),S("An error occurred with the debugger connection!",l("Small"))})}function he(){b("nativeLoggingHook",globalThis,(e,t)=>{w?.readyState===WebSocket.OPEN&&w.send(JSON.stringify({message:e[0],level:e[1]})),T.log(e[0])})}var{FormRow:Se,FormText:Ve}=g;function te({label:e,version:t,icon:o}){return React.createElement(Se,{label:e,leading:()=>React.createElement(Se.Icon,{source:l(o)}),trailing:()=>React.createElement(Ve,null,t),onPress:()=>{I(`${e} - ${t}`),S("Copied version to clipboard.",l("toast_copy_link"))}})}var{FormRow:d,FormSection:oe,FormInput:Le}=g,re=window.HermesInternal.getRuntimeProperties(),ne=u.Platform.constants.reactNativeVersion;function se(){let[e,t]=React.useState(""),o=[{label:"Discord",version:u.NativeModules.InfoDictionaryManager.Version,icon:"Discord"},{label:"React",version:React.version,icon:"ic_category_16px"},{label:"React Native",version:`${ne.major||0}.${ne.minor||0}.${ne.patch||0}`,icon:"mobile"},{label:"Hermes",version:`${re["OSS Release Version"]} ${re.Build} | Bytecode ${re["Bytecode Version"]}`,icon:"ic_hammer_and_chisel_24px"}];return React.createElement(u.ScrollView,null,React.createElement(oe,{title:"Links",android_noDivider:!0},React.createElement(d,{label:"Discord Server",leading:()=>React.createElement(d.Icon,{source:l("Discord")}),trailing:d.Arrow,onPress:()=>V.openURL(W)}),React.createElement(d,{label:"GitHub",leading:()=>React.createElement(d.Icon,{source:l("img_account_sync_github_white")}),trailing:d.Arrow,onPress:()=>V.openURL(z)})),React.createElement(oe,{title:"Debug"},React.createElement(Le,{value:e,onChange:r=>t(r),title:"DEBUGGER URL"}),React.createElement(d,{label:"Connect to debug websocket",leading:()=>React.createElement(d.Icon,{source:l("copy")}),trailing:d.Arrow,onPress:()=>L(e)}),React.createElement(d,{label:"Reload Discord",leading:()=>React.createElement(d.Icon,{source:l("ic_message_retry")}),trailing:d.Arrow,onPress:()=>u.NativeModules.BundleUpdaterManager.reload()})),React.createElement(oe,{title:"Versions"},o.map(r=>React.createElement(te,{label:r.label,version:r.version,icon:r.icon}))))}var{FormRow:Ne}=g,Ee=u.StyleSheet.create({asset:{width:32,height:32}});function ie({asset:e}){return React.createElement(Ne,{label:`${e.name} - ${e.id}`,trailing:()=>React.createElement(u.Image,{source:e.id,style:Ee.asset}),onPress:()=>{I(e.name),S("Copied asset name to clipboard.",l("toast_copy_link"))}})}var{FormInput:je}=g;function ae(){let[e,t]=React.useState("");return React.createElement(React.Fragment,null,React.createElement(je,{value:e,onChange:o=>t(o),title:"SEARCH"}),React.createElement(u.FlatList,{data:Object.values(h).filter(o=>o.name.includes(e)),renderItem:({item:o})=>React.createElement(ie,{asset:o}),keyExtractor:o=>o.name}))}var $e=P("getScreens",!1),Ue=P("UserSettingsOverviewWrapper",!1);function ce(){b("default",$e,(e,t)=>({...t,VendettaSettings:{title:"Vendetta",render:se},VendettaAssetBrowser:{title:"Asset Browser",render:ae}})),b("default",Ue,(e,t)=>{let o=M(t.props.children,r=>r.type&&r.type.name==="UserSettingsOverview");b("renderSupportAndAcknowledgements",o.type.prototype,(r,{props:{children:c}})=>{let s=c.findIndex(a=>a?.type?.name==="UploadLogsButton");s!==-1&&c.splice(s,1)}),b("render",o.type.prototype,(r,{props:{children:c}})=>{let s=[O.Messages.BILLING_SETTINGS,O.Messages.PREMIUM_SETTINGS],a=c.findIndex(n=>s.includes(n.props.title));c.splice(a===-1?4:a,0,React.createElement(ee,{navigation:o.props.navigation}))})},!0)}console.log("Hello from Vendetta!");async function He(){let e=!1;try{window.vendetta={patcher:me,metro:{...G,common:{...X}},constants:{...J},utils:{copyText:I,findInReactTree:M,findInTree:k},debug:{connectToDebugger:L},ui:{components:{...q},toasts:{...K},assets:{all:h,find:ge,getAssetByID:be,getAssetByName:ye,getAssetIDByName:l}},logger:T},ce(),Z(),he()}catch(t){e=!0,alert(`Vendetta failed to initialize...
${t.stack||t.toString()}`)}e||T.log("Vendetta is ready!")}He();})();
//# sourceURL=Vendetta