(function(){"use strict";const H=function(e){return Object.values(window.modules).find(function(t){return t?.publicModule.exports?.[e]})?.publicModule?.exports};window.React=H("createElement");const u=H("Text"),W=H("AbortCodes"),K=H("isMoment");function Te(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(const e in window.modules){const t=Number(e),n=window.modules[t]?.publicModule?.exports;if(!n||n===window||n.proxygone===null){Te(t);continue}}const De=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(n){const r=[],o=K?.locale();for(const a in e){const i=Number(a),c=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{__r(i),o&&o!==K.locale()&&K.locale(o)}catch{}if(!c){Te(i);continue}try{if(c.default&&c.__esModule&&n(c.default)){if(t)return c.default;r.push(c.default)}if(n(c)){if(t)return c;r.push(c)}}catch(l){console.error(`Failed to filter modules... ${l.stack||l.toString()}`)}}if(!t)return r}},se=window.modules,L=De(se,!0),ue=De(se),Ce=function(e){return function(t){return e.every(function(n){return t[n]!==void 0})}},Ae=function(e,t){return t?function(n){return n?.name===e}:function(n){return n?.default?.name===e}},vt=function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L(Ce(t))},bt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue(Ce(t))},J=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return L(Ae(e,t))},Rt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ue(Ae(e,t))},de=function(e){return L(vt(e))};var wt=Object.freeze({__proto__:null,find:L,findAll:ue,findByDisplayName:J,findByDisplayNameAll:Rt,findByProps:d,findByPropsAll:bt,findByStoreName:de,modules:se});const Et=d("getVoiceChannelId"),fe=d("Messages"),Ie=d("openURL"),Pe=L(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop}),F=d("createThemedStyleSheet"),me=d("setString","getString","hasString"),Y=d("registerAsset"),Oe=d("acceptInviteAndTransitionToInviteChannel"),ge=d("getBuiltInCommands"),_t=d("pushLazy"),St=d("createStackNavigator"),j=d("NavigationContainer"),$t=d("connectStores"),pe=d("_currentDispatchActionType"),k=window.React;var Tt=Object.freeze({__proto__:null,Flux:$t,FluxDispatcher:pe,NavigationNative:j,React:k,ReactNative:u,assets:Y,channels:Et,clipboard:me,commands:ge,constants:W,i18n:fe,invites:Oe,moment:K,navigation:_t,navigationStack:St,stylesheet:F,toasts:Pe,url:Ie});const xe=["a","b","i"],P=new Map;function Dt(e,t,n,r,o){const a=P.get(t)?.[e];if(!a)return o?Reflect.construct(t[e],n,r):t[e].apply(r,n);for(const l of a.b.values()){const m=l.call(r,n);Array.isArray(m)&&(n=m)}let i=(...l)=>o?Reflect.construct(a.o,l,r):a.o.apply(r,l);for(const l of a.i.values()){const m=i;i=(...v)=>l.call(r,v,m)}let c=i(...n);for(const l of a.a.values())c=l.call(r,n,c)??c;return c}function Fe(e,t,n,r){const o=P.get(e),a=o?.[t];return a?.[r].has(n)?(a[r].delete(n),xe.every(i=>a[i].size===0)&&(Reflect.defineProperty(e,t,{value:a.o,writable:!0,configurable:!0})||(e[t]=a.o),delete o[t]),Object.keys(o).length==0&&P.delete(e),!0):!1}function Ct(){for(const[e,t]of P.entries())for(const n in t)for(const r of xe)for(const o of t[n]?.[r].keys()??[])Fe(e,n,o,r)}var he=e=>(t,n,r,o=!1)=>{if(typeof n[t]!="function")throw new Error(`${t} is not a function in ${n.constructor.name}`);P.has(n)||P.set(n,{});const a=P.get(n);if(!a[t]){const l=n[t];a[t]={o:l,b:new Map,i:new Map,a:new Map};const m=(h,b,G)=>{const Vn=Dt(t,n,b,h,G);return o&&c(),Vn},v=new Proxy(l,{apply:(h,b,G)=>m(b,G,!1),construct:(h,b)=>m(l,b,!0),get:(h,b,G)=>b=="toString"?l.toString.bind(l):Reflect.get(h,b,G)});Reflect.defineProperty(n,t,{value:v,configurable:!0,writable:!0})||(n[t]=v)}const i=Symbol(),c=()=>Fe(n,t,i,e);return a[t][e].set(i,r),c};const At=he("b"),It=he("i"),D=he("a");var Pt=Object.freeze({__proto__:null,after:D,before:At,instead:It,unpatchAll:Ct}),Ot={...Pt};const C={};function ke(){const e=D("registerAsset",Y,function(t,n){const r=t[0];C[r.name]={...r,id:n}});for(let t=1;;t++){const n=Y.getAssetByID(t);if(!n)break;C[n.name]||(C[n.name]={...n,id:t})}return e}const xt=function(e){return Object.values(C).find(e)},Ft=function(e){return C[e]},kt=function(e){return Y.getAssetByID(e)},s=function(e){return C[e]?.id};var Bt=Object.freeze({__proto__:null,all:C,find:xt,getAssetByID:kt,getAssetByName:Ft,getAssetIDByName:s,patchAssets:ke});function R(e,t){return Pe.open({content:e,source:t})}var Vt=Object.freeze({__proto__:null,showToast:R});const Be=d("setLogFn").default,A=new Be("Vendetta");let y;function Ve(e){if(y!==void 0&&y.readyState!==WebSocket.CLOSED&&y.close(),e===""){R("Invalid debugger URL!",s("Small"));return}y=new WebSocket(`ws://${e}`),y.addEventListener("open",function(){return R("Connected to debugger.",s("Check"))}),y.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(n){console.error(n)}}),y.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),R("An error occurred with the debugger connection!",s("Small"))})}function Le(){const e=D("nativeLoggingHook",globalThis,function(t){y?.readyState===WebSocket.OPEN&&y.send(JSON.stringify({message:t[0],level:t[1]})),A.log(t[0])});return function(){y&&y.close(),e()}}const ye="9fb99ce";function je(){const e=u.NativeModules.InfoDictionaryManager,t=u.NativeModules.DCDDeviceManager,n=window.HermesInternal.getRuntimeProperties(),r=n["OSS Release Version"],o="for RN ",a=u.Platform.constants,i=a.reactNativeVersion;return{vendetta:{version:ye,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:e.Version,build:e.Build},react:{version:React.version,nativeVersion:r.startsWith(o)?r.substring(o.length):`${i.major}.${i.minor}.${i.patch}`},hermes:{version:r,buildType:n.Build,bytecodeVersion:n["Bytecode Version"]},...u.Platform.select({android:{os:{name:"Android",version:a.Release,sdk:a.Version}},ios:{os:{name:a.systemName,version:a.osVersion}}}),...u.Platform.select({android:{device:{manufacturer:a.Manufacturer,brand:a.Brand,model:a.Model,codename:t.device}},ios:{device:{manufacturer:t.deviceManufacturer,brand:t.deviceBrand,model:t.deviceModel,codename:t.device}}})}}var Lt=Object.freeze({__proto__:null,connectToDebugger:Ve,getDebugInfo:je,patchLogHook:Le,get socket(){return y},versionHash:ye});let M=[];function Me(){const e=D("getBuiltInCommands",ge,function(t,n){return n.concat(M)});return function(){M=[],e()}}function jt(e){const t=ge.getBuiltInCommands(1,!0,!1);t.sort(function(r,o){return parseInt(o.id)-parseInt(r.id)});const n=t[t.length-1];return e.id=(parseInt(n.id,10)-1).toString(),M.push(e),function(){return M=M.filter(function(r){let{id:o}=r;return o!==e.id})}}var Mt=Object.freeze({__proto__:null,patchCommands:Me,registerCommand:jt});const Nt=Object.freeze({GET:"GET",SET:"SET",DEL:"DEL"});function zt(){return{listeners:Object.values(Nt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var n=this;const r=function(o,a){n.off(o,r),t(o,a)};this.on(e,r)},emit(e,t){for(const n of this.listeners[e])n(e,t)}}}const Ne=u.NativeModules.MMKVManager,N=u.NativeModules.DCDFileManager,ze=u.Platform.select({default:function(e){return e},ios:function(e){return`Documents/${e}`}}),X=function(e){return{get:async function(){return JSON.parse(await Ne.getItem(e)??"{}")},set:function(t){return Ne.setItem(e,JSON.stringify(t))}}},Ue=function(e){let t;return{get:async function(){const n=`${N.getConstants().DocumentsDirPath}/${e}`;return!t&&!await N.fileExists(n)?(t=!0,N.writeFile("documents",ze(e),"{}","utf8")):JSON.parse(await N.readFile(n,"utf8"))},set:function(n){return void N.writeFile("documents",ze(e),JSON.stringify(n),"utf8")}}};u.NativeModules.MMKVManager;const Ge=Symbol("emitter accessor"),He=Symbol("wrapSync promise accessor");function We(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=zt();function n(r,o){return new Proxy(r,{get(a,i){if(i===Ge)return t;const c=[...o,i],l=a[i];return l!=null?(t.emit("GET",{path:c,value:l}),typeof l=="object"?n(l,c):l):l},set(a,i,c){return a[i]=c,t.emit("SET",{path:[...o,i],value:c}),!0},deleteProperty(a,i){const c=delete a[i];return c&&t.emit("DEL",{path:[...o,i]}),c}})}return{proxy:n(e,[]),emitter:t}}function B(e){const t=e[Ge],[,n]=React.useReducer(function(r){return~r},0);return React.useEffect(function(){const r=function(){return n()};return t.on("SET",r),t.on("DEL",r),function(){t.off("SET",r),t.off("DEL",r)}},[]),e}async function z(e){const t=await e.get(),{proxy:n,emitter:r}=We(t),o=function(){return e.set(n)};return r.on("SET",o),r.on("DEL",o),n}function Z(e){let t;const n=[],r=function(o){return t?o():n.push(o)};return e.then(function(o){t=o,n.forEach(function(a){return a()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(o){return[o,function(a){for(var i=arguments.length,c=new Array(i>1?i-1:0),l=1;l<i;l++)c[l-1]=arguments[l];return Reflect[o](t??a,...c)}]})),get(o,a,i){return a===He?r:Reflect.get(t??o,a,i)}})}const Ke=function(e){return new Promise(function(t){return e[He](t)})};var Ut=Object.freeze({__proto__:null,awaitSyncWrapper:Ke,createFileBackend:Ue,createMMKVBackend:X,createProxy:We,createStorage:z,useProxy:B,wrapSync:Z});async function ve(e,t){const n=await fetch(e,t);if(!n.ok)throw new Error("Request returned non-ok");return n}const f=Z(z(X("VENDETTA_PLUGINS"))),O={};async function Q(e){e.endsWith("/")||(e+="/");const t=f[e];let n;try{n=await(await ve(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}let r;if(t?.manifest.hash!==n.hash)try{r=await(await ve(e+(n.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!r&&!t)throw new Error(`Failed to fetch JS for ${e}`);f[e]={id:e,manifest:n,enabled:t?.enabled??!1,update:t?.update??!0,js:r??t.js}}async function Je(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in f)throw new Error("Plugin already installed");await Q(e),t&&await q(e)}async function Ye(e){const t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await z(X(e.id))},logger:new Be(`Vendetta \xBB ${e.manifest.name}`)},n=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,r=(0,eval)(n)(t),o=typeof r=="function"?r():r;return o.default||o}async function q(e){e.endsWith("/")||(e+="/");const t=f[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{const n=await Ye(t);O[e]=n,n.onLoad?.(),t.enabled=!0}catch(n){A.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,n);try{O[t.id]?.onUnload?.()}catch(r){A.error(`Plugin ${t.id} errored whilst unloading`,r)}delete O[e],t.enabled=!1}}function ee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");const n=f[e],r=O[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!r)throw new Error("Attempted to stop a non-started plugin");try{r.onUnload?.()}catch(o){A.error(`Plugin ${n.id} errored whilst unloading`,o)}delete O[e],t&&(n.enabled=!1)}function Xe(e){e.endsWith("/")||(e+="/"),f[e].enabled&&ee(e),delete f[e]}async function Ze(){await Ke(f);const e=Object.keys(f);return await Promise.allSettled(e.filter(function(t){return f[t].enabled&&f[t].update}).map(function(t){return Q(t)})),await Promise.allSettled(e.filter(function(t){return f[t].enabled}).map(function(t){return q(t)})),e.filter(function(t){return!f[t].enabled&&f[t].update}).forEach(function(t){return Q(t)}),Gt}const Gt=function(){return Object.keys(O).forEach(function(e){return ee(e,!1)})},Qe=function(e){return O[e]?.settings};var Ht=Object.freeze({__proto__:null,evalPlugin:Ye,fetchPlugin:Q,getSettings:Qe,initPlugins:Ze,installPlugin:Je,plugins:f,removePlugin:Xe,startPlugin:q,stopPlugin:ee});function qe(e,t){let{walkable:n=[],ignore:r=[],maxDepth:o=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0;function i(c,l){let{walkable:m=[],ignore:v=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(a+=1,!(a>o)){if(typeof l=="string"){if(c.hasOwnProperty(l))return c[l]}else if(l(c))return c;if(c){if(Array.isArray(c))for(const T of c){const h=i(T,l,{walkable:m,ignore:v});if(h)return h}else if(typeof c=="object"){for(const T of Object.keys(c))if(!(m!=null&&m.includes(T))&&!v.includes(T))try{const h=i(c[T],l,{walkable:m,ignore:v});if(h)return h}catch{}}}}}return i(e,t,{walkable:n,ignore:r})}function et(e,t){return qe(e,t,{walkable:["props","children","child","sibling"]})}function be(e){let{label:t,icon:n,noPadding:r=!1,children:o}=e;const[a,i]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(g.FormRow,{label:t,leading:n&&React.createElement(g.FormRow.Icon,{source:s(n)}),trailing:React.createElement(g.FormRow.Arrow,{style:{transform:[{rotate:`${a?180:90}deg`}]},source:s("down_arrow")}),onPress:function(){return i(!a)}}),!a&&React.createElement(React.Fragment,null,React.createElement(g.FormDivider,null),React.createElement(u.View,{style:!r&&{paddingHorizontal:15}},o)))}const g=d("Form","FormSection"),Re=d("Button","Text","View"),tt=J("StaticSearchBarContainer"),nt=d("alertDarkStyles","alertLightStyles").default;var Wt=Object.freeze({__proto__:null,Alert:nt,ErrorBoundary:I,Forms:g,General:Re,Search:tt,Summary:be});const te=d("SemanticColor"),V=W.ThemeColorMap??te?.default?.colors??te?.SemanticColor,Kt=W.Colors??te?.default?.unsafe_rawColors??te?.RawColor;var Jt=Object.freeze({__proto__:null,rawColors:Kt,semanticColors:V});function Yt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(e)}function Zt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function Qt(e,t){return t&&(qt(t)==="object"||typeof t=="function")?t:Yt(e)}function we(e,t){return we=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},we(e,t)}var qt=function(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e};function en(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tn(e){var t=en();return function(){var n=ne(e),r;if(t){var o=ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Qt(this,r)}}const re=d("Looks","Colors","Sizes"),Ee=F.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5},codeblock:{fontFamily:W.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,fontSize:12,backgroundColor:V.BACKGROUND_SECONDARY,padding:5,borderRadius:5,marginBottom:5}});let I=function(e){Zt(n,e);var t=tn(n);function n(o){Xt(this,n);var a;return a=t.call(this,o),a.state={hasErr:!1},a}var r=n.prototype;return r.render=function(){var o=this;return this.state.hasErr?k.createElement(u.ScrollView,{style:Ee.view},k.createElement(g.FormText,{style:Ee.title},"Uh oh."),k.createElement(g.FormText,{style:Ee.codeblock},this.state.errText),k.createElement(re,{color:re.Colors.RED,size:re.Sizes.MEDIUM,look:re.Looks.FILLED,onPress:function(){return o.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},n}(k.Component);I.getDerivedStateFromError=function(e){return{hasErr:!0,errText:e.message}};var w=Z(z(X("VENDETTA_SETTINGS")));const E=Z(z(Ue("vendetta_loader.json"))),{FormRow:_,FormSection:nn,FormDivider:rt}=g;function rn(){const e=j.useNavigation();return B(w),React.createElement(I,null,React.createElement(nn,{key:"Vendetta",title:"Vendetta"},React.createElement(_,{label:"General",leading:React.createElement(_.Icon,{source:s("settings")}),trailing:_.Arrow,onPress:function(){return e.push("VendettaSettings")}}),React.createElement(rt,null),React.createElement(_,{label:"Plugins",leading:React.createElement(_.Icon,{source:s("debug")}),trailing:_.Arrow,onPress:function(){return e.push("VendettaPlugins")}}),w.developerSettings&&React.createElement(React.Fragment,null,React.createElement(rt,null),React.createElement(_,{label:"Developer",leading:React.createElement(_.Icon,{source:s("ic_progress_wrench_24px")}),trailing:_.Arrow,onPress:function(){return e.push("VendettaDeveloper")}}))))}const ot="n9QQ4XhhJP",at="https://github.com/vendetta-mod",ct=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/;var on=Object.freeze({__proto__:null,DISCORD_SERVER:ot,GITHUB:at,HTTP_REGEX:ct});function oe(e){try{me.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}const{FormRow:it,FormText:an}=g;function lt(e){let{label:t,version:n,icon:r}=e;return React.createElement(it,{label:t,leading:React.createElement(it.Icon,{source:s(r)}),trailing:React.createElement(an,null,n),onPress:function(){oe(`${t} - ${n}`),R("Copied version to clipboard.",s("toast_copy_link"))}})}const{FormRow:S,FormSwitchRow:cn,FormSection:_e,FormDivider:U}=g,p=je();function ln(){B(w);const e=[{label:"Vendetta",version:p.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${p.discord.version} (${p.discord.build})`,icon:"Discord"},{label:"React",version:p.react.version,icon:"ic_category_16px"},{label:"React Native",version:p.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:p.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:p.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${p.os.name} ${p.os.version}`,icon:"ic_cog_24px"},...p.os.sdk?[{label:"SDK",version:p.os.sdk,icon:"ic_profile_badge_verified_developer_color"}]:[],{label:"Manufacturer",version:p.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:p.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:p.device.model,icon:"ic_phonelink_24px"},{label:u.Platform.select({android:"Codename",ios:"Machine ID"}),version:p.device.codename,icon:"ic_compose_24px"}];return React.createElement(I,null,React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(_e,{title:"Links",titleStyleType:"no_border"},React.createElement(S,{label:"Discord Server",leading:React.createElement(S.Icon,{source:s("Discord")}),trailing:S.Arrow,onPress:function(){return Oe.acceptInviteAndTransitionToInviteChannel({inviteKey:ot})}}),React.createElement(U,null),React.createElement(S,{label:"GitHub",leading:React.createElement(S.Icon,{source:s("img_account_sync_github_white")}),trailing:S.Arrow,onPress:function(){return Ie.openURL(at)}})),React.createElement(_e,{title:"Actions"},React.createElement(S,{label:"Reload Discord",leading:React.createElement(S.Icon,{source:s("ic_message_retry")}),onPress:function(){return u.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(U,null),React.createElement(cn,{label:"Developer Settings",leading:React.createElement(S.Icon,{source:s("ic_progress_wrench_24px")}),value:w.developerSettings,onValueChange:function(n){w.developerSettings=n}})),React.createElement(_e,{title:"Info"},React.createElement(be,{label:"Versions",icon:"ic_information_filled_24px"},e.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(lt,{label:n.label,version:n.version,icon:n.icon}),r!==e.length-1&&React.createElement(U,null))})),React.createElement(U,null),React.createElement(be,{label:"Platform",icon:"ic_mobile_device"},t.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(lt,{label:n.label,version:n.version,icon:n.icon}),r!==t.length-1&&React.createElement(U,null))})))))}const sn=d("show","openLazy","close"),{FormRow:Se,FormSwitch:un}=g,{TouchableOpacity:ae,Image:ce}=Re,x=F.createThemedStyleSheet({card:{backgroundColor:V?.BACKGROUND_SECONDARY,borderRadius:5,marginHorizontal:10,marginBottom:10},header:{padding:0,backgroundColor:V?.BACKGROUND_TERTIARY,borderTopLeftRadius:5,borderTopRightRadius:5},actions:{flexDirection:"row-reverse",alignItems:"center"},icon:{width:22,height:22,marginLeft:5,tintColor:V?.INTERACTIVE_NORMAL}});function dn(e){let{plugin:t,index:n}=e;const r=Qe(t.id),o=j.useNavigation(),[a,i]=React.useState(!1);return a?null:React.createElement(u.View,{style:[x.card,{marginTop:n===0?10:0}]},React.createElement(Se,{style:x.header,label:`${t.manifest.name} by ${t.manifest.authors.map(function(c){return c.name}).join(", ")}`,leading:React.createElement(Se.Icon,{source:s(t.manifest.vendetta?.icon||"ic_application_command_24px")}),trailing:React.createElement(un,{style:u.Platform.OS==="android"&&{marginVertical:-15},value:t.enabled,onValueChange:function(c){try{c?q(t.id):ee(t.id)}catch(l){R(l.message,s("Small"))}}})}),React.createElement(Se,{label:t.manifest.description,trailing:React.createElement(u.View,{style:x.actions},React.createElement(ae,{onPress:function(){return sn.show({title:"Wait!",body:`Are you sure you wish to delete ${t.manifest.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){try{Xe(t.id),i(!0)}catch(c){R(c.message,s("Small"))}}})}},React.createElement(ce,{style:x.icon,source:s("ic_message_delete")})),React.createElement(ae,{onPress:function(){oe(t.id),R("Copied plugin URL to clipboard.",s("toast_copy_link"))}},React.createElement(ce,{style:x.icon,source:s("copy")})),React.createElement(ae,{onPress:function(){t.update=!t.update,R(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,s("toast_image_saved"))}},React.createElement(ce,{style:x.icon,source:s(t.update?"Check":"Small")})),r&&React.createElement(ae,{onPress:function(){return o.push("VendettaCustomPage",{title:t.manifest.name,render:r})}},React.createElement(ce,{style:x.icon,source:s("settings")})))}))}function fn(){return B(f),React.createElement(I,null,React.createElement(u.View,{style:{flex:1}},React.createElement(u.FlatList,{data:Object.values(f),renderItem:function(e){let{item:t,index:n}=e;return React.createElement(dn,{plugin:t,index:n})},keyExtractor:function(e){return e.id}})))}const{FormSection:$e,FormRow:$,FormSwitchRow:st,FormInput:ut,FormDivider:ie}=g;function mn(){const e=j.useNavigation();return B(w),B(E),React.createElement(I,null,React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement($e,{title:"Debug",titleStyleType:"no_border"},React.createElement(ut,{value:w.debuggerUrl,onChange:function(t){return w.debuggerUrl=t},placeholder:"127.0.0.1:9090",title:"DEBUGGER URL"}),React.createElement(ie,null),React.createElement($,{label:"Connect to debug websocket",leading:React.createElement($.Icon,{source:s("copy")}),onPress:function(){return Ve(w.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(ie,null),React.createElement($,{label:"Connect to React DevTools",leading:React.createElement($.Icon,{source:s("ic_badge_staff")}),onPress:function(){try{window.__vendetta_rdc?.connectToDevTools({host:w.debuggerUrl.split(":")?.[0],resolveRNStyle:u.StyleSheet.flatten})}catch(t){A.error("Failed to connect to React DevTools!",t),R("Failed to connect to React DevTools!",s("Small"))}}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement($e,{title:"Loader config"},React.createElement(st,{label:"Load from custom url",subLabel:"Load Vendetta from a custom endpoint.",leading:React.createElement($.Icon,{source:s("copy")}),value:E.customLoadUrl.enabled,onValueChange:function(t){E.customLoadUrl.enabled=t}}),React.createElement(ie,null),E.customLoadUrl.enabled&&React.createElement(React.Fragment,null,React.createElement(ut,{value:E.customLoadUrl.url,onChange:function(t){return E.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",title:"VENDETTA URL"}),React.createElement(ie,null)),window.__vendetta_loader.features.devtools&&React.createElement(st,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,leading:React.createElement($.Icon,{source:s("ic_badge_staff")}),value:E.loadReactDevTools,onValueChange:function(t){E.loadReactDevTools=t}})),React.createElement($e,{title:"Other"},React.createElement($,{label:"Asset Browser",leading:React.createElement($.Icon,{source:s("ic_media_upload")}),trailing:$.Arrow,onPress:function(){return e.push("VendettaAssetBrowser")}}))))}const{FormRow:gn}=g,pn=F.createThemedStyleSheet({asset:{width:32,height:32}});function hn(e){let{asset:t}=e;return React.createElement(gn,{label:`${t.name} - ${t.id}`,trailing:React.createElement(u.Image,{source:t.id,style:pn.asset}),onPress:function(){oe(t.name),R("Copied asset name to clipboard.",s("toast_copy_link"))}})}const{FormDivider:yn}=g,vn=F.createThemedStyleSheet({search:{margin:0,padding:15,borderBottomWidth:0,background:"none",backgroundColor:"none"}});function bn(){const[e,t]=React.useState("");return React.createElement(I,null,React.createElement(u.View,{style:{flex:1}},React.createElement(tt,{style:vn.search,onChangeText:function(n){return t(n)},placeholder:"Search"}),React.createElement(u.FlatList,{data:Object.values(C).filter(function(n){return n.name.includes(e)||n.id.toString()===e}),renderItem:function(n){let{item:r}=n;return React.createElement(React.Fragment,null,React.createElement(hn,{asset:r}),React.createElement(yn,null))},keyExtractor:function(n){return n.name}})))}const{FormInput:Rn}=g,dt=d("openLazy","close");function wn(e){let{title:t,confirmText:n,confirmColor:r,onConfirm:o,cancelText:a,placeholder:i,initialValue:c=""}=e;const[l,m]=React.useState(c),[v,T]=React.useState("");function h(){Promise.resolve(o(l)).then(function(){dt.close()}).catch(function(b){T(b.message)})}return React.createElement(nt,{title:t,confirmText:n,confirmColor:r,isConfirmButtonDisabled:v.length!==0,onConfirm:h,cancelText:a,onCancel:function(){return dt.close()}},React.createElement(Rn,{placeholder:i,value:l,onChangeText:function(b){m(b),v&&T("")},returnKeyType:"done",onSubmitEditing:h,error:v,autoFocus:!0,showBorder:!0,style:{paddingVertical:5,alignSelf:"stretch",paddingHorizontal:0}}))}const ft=d("openLazy","close");function En(e){const t=e;return typeof e.content=="string"?t.body=e.content:t.children=e.content,delete t.content,ft.show(t)}function mt(e,t){ft.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})}function gt(e){mt(wn,e)}var _n=Object.freeze({__proto__:null,showConfirmationAlert:En,showCustomAlert:mt,showInputAlert:gt});const{TouchableOpacity:Sn,Image:$n}=Re,Tn=F.createThemedStyleSheet({icon:{marginRight:10,tintColor:V.HEADER_PRIMARY}});function Dn(){return React.createElement(Sn,{onPress:function(){return me.getString().then(function(e){return gt({title:"Install Plugin",initialValue:ct.test(e)?e:"",placeholder:"https://example.com/",onConfirm:Je,confirmText:"Install",confirmColor:void 0,cancelText:"Cancel"})})}},React.createElement($n,{style:Tn.icon,source:s("ic_add_24px")}))}const Cn=J("getScreens",!1),An=J("UserSettingsOverviewWrapper",!1);function In(){const e=new Array;return e.push(D("default",Cn,function(t,n){return{...n,VendettaSettings:{title:"Vendetta",render:ln},VendettaPlugins:{title:"Plugins",render:fn,headerRight:Dn},VendettaDeveloper:{title:"Developer",render:mn},VendettaAssetBrowser:{title:"Asset Browser",render:bn},VendettaCustomPage:{title:"Vendetta Page",render:function(r){let{render:o,...a}=r;const i=j.useNavigation();return React.useEffect(function(){return a&&i.setOptions(a)}),React.createElement(I,null,React.createElement(o,null))}}}})),D("default",An,function(t,n){const r=et(n.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});e.push(D("renderSupportAndAcknowledgements",r.type.prototype,function(o,a){let{props:{children:i}}=a;const c=i.findIndex(function(l){return l?.type?.name==="UploadLogsButton"});c!==-1&&i.splice(c,1)})),e.push(D("render",r.type.prototype,function(o,a){let{props:{children:i}}=a;const c=[fe.Messages.BILLING_SETTINGS,fe.Messages.PREMIUM_SETTINGS],l=i.findIndex(function(m){return c.includes(m.props.title)});i.splice(l===-1?4:l,0,React.createElement(rn,null))}))},!0),function(){return e.forEach(function(t){return t()})}}const Pn=d("updateTheme","overrideTheme"),pt=d("setAMOLEDThemeEnabled"),ht=de("ThemeStore"),On=de("UnsyncedUserSettingsStore");function yt(){const e=ht.theme||"dark";Pn.overrideTheme(e),pt&&On.useAMOLEDTheme===2&&pt.setAMOLEDThemeEnabled(!0),pe.unsubscribe("I18N_LOAD_START",yt)}function xn(){try{ht&&pe.subscribe("I18N_LOAD_START",yt)}catch(e){A.error("Failed to fix theme...",e)}}function Fn(e){return Object.isFrozen(e)?Object.assign({},e):e}var kn=Object.freeze({__proto__:null,copyText:oe,findInReactTree:et,findInTree:qe,safeFetch:ve,unfreeze:Fn});function le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o={...e};return n.forEach(function(a){return delete o[a]}),o}async function Bn(e){return{patcher:le(Ot,"unpatchAll"),metro:{...wt,common:{...Tt}},constants:on,utils:kn,debug:le(Lt,"versionHash","patchLogHook"),ui:{components:Wt,toasts:Vt,alerts:_n,assets:Bt,...Jt},plugins:le(Ht,"initPlugins"),commands:le(Mt,"patchCommands"),storage:Ut,settings:w,loader:{identity:window.__vendetta_loader,config:E},logger:A,version:ye,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}console.log("Hello from Vendetta!"),async function(){try{const e=await Promise.all([Le(),ke(),Me(),xn(),In()]);window.vendetta=await Bn(e),e.push(await Ze()),A.log("Vendetta is ready!")}catch(e){alert(`Vendetta failed to initialize... ${e.stack||e.toString()}`)}}()})();
//# sourceURL=Vendetta