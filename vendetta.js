"use strict";(()=>{var Ae=Object.defineProperty;var B=(e,t)=>{for(var o in t)Ae(e,o,{get:t[o],enumerable:!0})};var U={};B(U,{after:()=>b,before:()=>Ie,instead:()=>ve,unpatchAll:()=>me});var $=["a","b","i"],h=new Map;function pe(e,t,o,n,l){let i=h.get(t)?.[e];if(!i)return l?Reflect.construct(t[e],o,n):t[e].apply(n,o);for(let a of i.b.values()){let d=a.call(n,o);Array.isArray(d)&&(o=d)}let c=(...a)=>l?Reflect.construct(i.o,a,n):i.o.apply(n,a);for(let a of i.i.values()){let d=c;c=(...A)=>a.call(n,A,d)}let s=c(...o);for(let a of i.a.values())s=a.call(n,o,s)??s;return s}function j(e,t,o,n){let l=h.get(e),i=l?.[t];return i?.[n].has(o)?(i[n].delete(o),$.every(c=>i[c].size===0)&&(Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0})||(e[t]=i.o),delete l[t]),Object.keys(l).length==0&&h.delete(e),!0):!1}function me(){for(let[e,t]of h.entries())for(let o in t)for(let n of $)for(let l of t[o]?.[n].keys()??[])j(e,o,l,n)}var V=e=>(t,o,n,l=!1)=>{if(typeof o[t]!="function")throw new Error(`${t} is not a function in ${o.constructor.name}`);h.has(o)||h.set(o,{});let i=h.get(o);if(!i[t]){let a=o[t];i[t]={o:a,b:new Map,i:new Map,a:new Map};let d=(u,I,T)=>{let we=pe(t,o,I,u,T);return l&&s(),we},A=new Proxy(a,{apply:(u,I,T)=>d(I,T,!1),construct:(u,I)=>d(a,I,!0),get:(u,I,T)=>I=="toString"?a.toString.bind(a):Reflect.get(u,I,T)});Reflect.defineProperty(o,t,{value:A,configurable:!0,writable:!0})||(o[t]=A)}let c=Symbol(),s=()=>j(o,t,c,e);return i[t][e].set(c,n),s};var Ie=V("b"),ve=V("i"),b=V("a");var de={...U};var W={};B(W,{filterModules:()=>H,find:()=>_,findAll:()=>G,findByDisplayName:()=>L,findByDisplayNameAll:()=>Be,findByProps:()=>m,findByPropsAll:()=>Fe,modules:()=>C});var k;function fe(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(let e in window.modules){let t=Number(e),o=window.modules[t].publicModule.exports;if(!k&&o&&o.isMoment&&(k=o),!o||o===window||o.proxygone===null){fe(t);continue}}var H=(e,t=!1)=>o=>{let n=[],l=k?.locale();for(let i in e){let c=Number(i),s=e[c].publicModule.exports;if(!e[c].isInitialized)try{__r(c),l&&l!==k.locale()&&k.locale(l)}catch{}if(!s){fe(c);continue}try{if(s.default&&s.__esModule&&o(s.default)){if(t)return s.default;n.push(s.default)}if(o(s)){if(t)return s;n.push(s)}}catch(a){console.error(`Failed to getModule... ${a.stack||a.toString()}`)}}if(!t)return n},C=window.modules,_=H(C,!0),G=H(C),ue=e=>t=>e.every(o=>t[o]!==void 0),ge=(e,t)=>t?o=>o.name===e:o=>o?.default?.name===e,m=(...e)=>_(ue(e)),Fe=(...e)=>G(ue(e)),L=(e,t=!0)=>_(ge(e,t)),Be=(e,t=!0)=>G(ge(e,t));var De=m("setLogFn").default,Te=new De("Vendetta"),P=Te;var ke=m("setString","getString");function v(e){try{ke.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}function M(e,t,{walkable:o=[],ignore:n=[],maxDepth:l=100}={}){let i=0;function c(s,a,{walkable:d=[],ignore:A=[]}={}){if(i+=1,!(i>l)){if(typeof a=="string"){if(s.hasOwnProperty(a))return s[a]}else if(a(s))return s;if(!!s){if(Array.isArray(s))for(let F of s){let u=c(F,a,{walkable:d,ignore:A});if(u)return u}else if(typeof s=="object"){for(let F of Object.keys(s))if(!(d!=null&&d.includes(F))&&!A.includes(F))try{let u=c(s[F],a,{walkable:d,ignore:A});if(u)return u}catch{}}}}}return c(e,t,{walkable:o,ignore:n})}function O(e,t){return M(e,t,{walkable:["props","children","child","sibling"]})}var Q={};B(Q,{DISCORD_SERVER:()=>z,GITHUB:()=>J});var z="https://discord.gg/n9QQ4XhhJP",J="https://github.com/vendetta-mod";var q={};B(q,{AsyncStorage:()=>Me,React:()=>r,ReactNative:()=>g,channels:()=>Pe,constants:()=>_e,i18n:()=>N,toasts:()=>X,url:()=>E});var _e=m("API_HOST"),Pe=m("getVoiceChannelId"),N=m("Messages"),E=m("openURL"),X=_(e=>e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop),r=m("createElement"),g=m("Text","Image"),Me=m("setItem");var K={};B(K,{Forms:()=>y});var y=m("FormSection");var Y={};B(Y,{showToast:()=>x});function x(e,t){return X.open({content:e,source:t})}var Z=m("registerAsset"),S={};function ee(){try{b("registerAsset",Z,(e,t)=>{let o=e[0];S[o.name]={...o,id:t}});for(let e=1;;e++){let t=Z.getAssetByID(e);if(!t)break;S[t.name]||(S[t.name]={...t,id:e})}}catch{}}var ye=e=>Object.values(S).find(e),he=e=>S[e],be=e=>Z.getAssetByID(e),p=e=>S[e]?.id;var{FormRow:D,FormSection:Oe}=y;function te({navigation:e}){return r.createElement(Oe,{key:"Vendetta",title:"Vendetta"},r.createElement(D,{label:"General",leading:()=>r.createElement(D.Icon,{source:p("settings")}),trailing:D.Arrow,onPress:()=>e.push("VendettaSettings")}),r.createElement(D,{label:"Asset Browser",leading:()=>r.createElement(D.Icon,{source:p("grid")}),trailing:D.Arrow,onPress:()=>e.push("VendettaAssetBrowser")}))}var w,Ve=eval;function R(e){if(w!==void 0&&w.readyState!==WebSocket.CLOSED&&w.close(),e===""){x("Invalid debugger URL!",p("Small"));return}w=new WebSocket(`ws://${e}`),w.addEventListener("open",()=>x("Connected to debugger.",p("Check"))),w.addEventListener("message",t=>{try{Ve(t.data)}catch(o){console.error(o)}}),w.addEventListener("error",t=>{console.log(`Debugger error: ${t.message}`),x("An error occurred with the debugger connection!",p("Small"))})}function Se(){b("nativeLoggingHook",globalThis,(e,t)=>{w?.readyState===WebSocket.OPEN&&w.send(JSON.stringify({message:e[0],level:e[1]})),P.log(e[0])})}var{FormRow:xe,FormText:Le}=y;function oe({label:e,version:t,icon:o}){return r.createElement(xe,{label:e,leading:()=>r.createElement(xe.Icon,{source:p(o)}),trailing:()=>r.createElement(Le,null,t),onPress:()=>{v(`${e} - ${t}`),x("Copied version to clipboard.",p("toast_copy_link"))}})}var{FormRow:f,FormSection:re,FormInput:Ne}=y,ne=window.HermesInternal.getRuntimeProperties(),se=g.Platform.constants.reactNativeVersion;function ie(){let[e,t]=r.useState(""),o=[{label:"Discord",version:g.NativeModules.InfoDictionaryManager.Version,icon:"Discord"},{label:"React",version:r.version,icon:"ic_category_16px"},{label:"React Native",version:`${se.major||0}.${se.minor||0}.${se.patch||0}`,icon:"mobile"},{label:"Hermes",version:`${ne["OSS Release Version"]} ${ne.Build} | Bytecode ${ne["Bytecode Version"]}`,icon:"ic_hammer_and_chisel_24px"}];return r.createElement(g.ScrollView,null,r.createElement(re,{title:"Links",android_noDivider:!0},r.createElement(f,{label:"Discord Server",leading:()=>r.createElement(f.Icon,{source:p("Discord")}),trailing:f.Arrow,onPress:()=>E.openURL(z)}),r.createElement(f,{label:"GitHub",leading:()=>r.createElement(f.Icon,{source:p("img_account_sync_github_white")}),trailing:f.Arrow,onPress:()=>E.openURL(J)})),r.createElement(re,{title:"Debug"},r.createElement(Ne,{value:e,onChange:n=>t(n),title:"DEBUGGER URL"}),r.createElement(f,{label:"Connect to debug websocket",leading:()=>r.createElement(f.Icon,{source:p("copy")}),trailing:f.Arrow,onPress:()=>R(e)}),r.createElement(f,{label:"Reload Discord",leading:()=>r.createElement(f.Icon,{source:p("ic_message_retry")}),trailing:f.Arrow,onPress:()=>g.NativeModules.BundleUpdaterManager.reload()})),r.createElement(re,{title:"Versions"},o.map(n=>r.createElement(oe,{label:n.label,version:n.version,icon:n.icon}))))}var{FormRow:Ee}=y,Re=g.StyleSheet.create({asset:{width:32,height:32}});function ae({asset:e}){return r.createElement(Ee,{label:`${e.name} - ${e.id}`,trailing:()=>r.createElement(g.Image,{source:e.id,style:Re.asset}),onPress:()=>{v(e.name),x("Copied asset name to clipboard.",p("toast_copy_link"))}})}var{FormInput:$e}=y;function ce(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement($e,{value:e,onChange:o=>t(o),title:"SEARCH"}),r.createElement(g.FlatList,{data:Object.values(S).filter(o=>o.name.includes(e)),renderItem:({item:o})=>r.createElement(ae,{asset:o}),keyExtractor:o=>o.name}))}var je=L("getScreens",!1),Ue=L("UserSettingsOverviewWrapper",!1);function le(){b("default",je,(e,t)=>({...t,VendettaSettings:{title:"Vendetta",render:ie},VendettaAssetBrowser:{title:"Asset Browser",render:ce}})),b("default",Ue,(e,t)=>{let o=O(t.props.children,n=>n.type&&n.type.name==="UserSettingsOverview");b("renderSupportAndAcknowledgements",o.type.prototype,(n,{props:{children:l}})=>{let i=l.findIndex(c=>c?.type?.name==="UploadLogsButton");i!==-1&&l.splice(i,1)}),b("render",o.type.prototype,(n,{props:{children:l}})=>{let i=[N.Messages.BILLING_SETTINGS,N.Messages.PREMIUM_SETTINGS],c=l.findIndex(s=>i.includes(s.props.title));l.splice(c===-1?4:c,0,r.createElement(te,{navigation:o.props.navigation}))})},!0)}console.log("Hello from Vendetta!");async function He(){let e=!1;try{le(),ee(),Se(),window.vendetta={patcher:de,metro:{...W,common:{...q}},constants:{...Q},utils:{copyText:v,findInReactTree:O,findInTree:M},debug:{connectToDebugger:R},ui:{components:{...K},toasts:{...Y},assets:{all:S,find:ye,getAssetByID:be,getAssetByName:he,getAssetIDByName:p}},logger:P}}catch(t){e=!0,alert(`Vendetta failed to initialize...
${t.stack||t.toString()}`)}e||P.log("Vendetta is ready!")}He();})();
//# sourceURL=Vendetta