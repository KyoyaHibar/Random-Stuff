"use strict";(()=>{var Se=Object.defineProperty;var L=(e,t)=>{for(var o in t)Se(e,o,{get:t[o],enumerable:!0})};var R={};L(R,{after:()=>h,before:()=>we,instead:()=>xe,unpatchAll:()=>se});var N=["a","b","i"],y=new Map;function ne(e,t,o,n,l){let i=y.get(t)?.[e];if(!i)return l?Reflect.construct(t[e],o,n):t[e].apply(n,o);for(let a of i.b.values()){let d=a.call(n,o);Array.isArray(d)&&(o=d)}let c=(...a)=>l?Reflect.construct(i.o,a,n):i.o.apply(n,a);for(let a of i.i.values()){let d=c;c=(...x)=>a.call(n,x,d)}let s=c(...o);for(let a of i.a.values())s=a.call(n,o,s)??s;return s}function E(e,t,o,n){let l=y.get(e),i=l?.[t];return i?.[n].has(o)?(i[n].delete(o),N.every(c=>i[c].size===0)&&(Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0})||(e[t]=i.o),delete l[t]),Object.keys(l).length==0&&y.delete(e),!0):!1}function se(){for(let[e,t]of y.entries())for(let o in t)for(let n of N)for(let l of t[o]?.[n].keys()??[])E(e,o,l,n)}var P=e=>(t,o,n,l=!1)=>{if(typeof o[t]!="function")throw new Error(`${t} is not a function in ${o.constructor.name}`);y.has(o)||y.set(o,{});let i=y.get(o);if(!i[t]){let a=o[t];i[t]={o:a,b:new Map,i:new Map,a:new Map};let d=(u,A,B)=>{let be=ne(t,o,A,u,B);return l&&s(),be},x=new Proxy(a,{apply:(u,A,B)=>d(A,B,!1),construct:(u,A)=>d(a,A,!0),get:(u,A,B)=>A=="toString"?a.toString.bind(a):Reflect.get(u,A,B)});Reflect.defineProperty(o,t,{value:x,configurable:!0,writable:!0})||(o[t]=x)}let c=Symbol(),s=()=>E(o,t,c,e);return i[t][e].set(c,n),s};var we=P("b"),xe=P("i"),h=P("a");var ie={...R};var H={};L(H,{filterModules:()=>$,find:()=>k,findAll:()=>U,findByDisplayName:()=>M,findByDisplayNameAll:()=>Ie,findByProps:()=>m,findByPropsAll:()=>Ae,modules:()=>j});var D;function ae(e){Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})}for(let e in window.modules){let t=Number(e),o=window.modules[t].publicModule.exports;if(!D&&o&&o.isMoment&&(D=o),!o||o===window||o.proxygone===null){ae(t);continue}}var $=(e,t=!1)=>o=>{let n=[],l=D?.locale();for(let i in e){let c=Number(i),s=e[c].publicModule.exports;if(!e[c].isInitialized)try{__r(c),l&&l!==D.locale()&&D.locale(l)}catch{}if(!s){ae(c);continue}try{if(s.default&&s.__esModule&&o(s.default)){if(t)return s.default;n.push(s.default)}if(o(s)){if(t)return s;n.push(s)}}catch(a){console.error(`Failed to getModule... ${a.stack||a.toString()}`)}}if(!t)return n},j=window.modules,k=$(j,!0),U=$(j),ce=e=>t=>e.every(o=>t[o]!==void 0),le=(e,t)=>t?o=>o.name===e:o=>o?.default?.name===e,m=(...e)=>k(ce(e)),Ae=(...e)=>U(ce(e)),M=(e,t=!0)=>k(le(e,t)),Ie=(e,t=!0)=>U(le(e,t));var ve=m("setLogFn").default,Fe=new ve("Vendetta"),T=Fe;var G={};L(G,{AsyncStorage:()=>ke,React:()=>r,ReactNative:()=>g,channels:()=>De,constants:()=>Be,i18n:()=>O,toasts:()=>C,url:()=>V});var Be=m("API_HOST"),De=m("getVoiceChannelId"),O=m("Messages"),V=m("openURL"),C=k(e=>e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop),r=m("createElement"),g=m("Text","Image"),ke=m("setItem");var W=m("registerAsset"),b={};function z(){try{h("registerAsset",W,(e,t)=>{let o=e[0];b[o.name]={...o,id:t}});for(let e=1;;e++){let t=W.getAssetByID(e);if(!t)break;b[t.name]||(b[t.name]={...t,id:e})}}catch{}}var pe=e=>Object.values(b).find(e),me=e=>b[e],de=e=>W.getAssetByID(e),p=e=>b[e]?.id;function J(e,t,{walkable:o=[],ignore:n=[],maxDepth:l=100}={}){let i=0;function c(s,a,{walkable:d=[],ignore:x=[]}={}){if(i+=1,!(i>l)){if(typeof a=="string"){if(s.hasOwnProperty(a))return s[a]}else if(a(s))return s;if(!!s){if(Array.isArray(s))for(let v of s){let u=c(v,a,{walkable:d,ignore:x});if(u)return u}else if(typeof s=="object"){for(let v of Object.keys(s))if(!(d!=null&&d.includes(v))&&!x.includes(v))try{let u=c(s[v],a,{walkable:d,ignore:x});if(u)return u}catch{}}}}}return c(e,t,{walkable:o,ignore:n})}function Q(e,t){return J(e,t,{walkable:["props","children","child","sibling"]})}var S=m("FormSection");var{FormRow:F,FormSection:Te}=S;function X({navigation:e}){return r.createElement(Te,{key:"Vendetta",title:"Vendetta"},r.createElement(F,{label:"General",leading:()=>r.createElement(F.Icon,{source:p("settings")}),trailing:F.Arrow,onPress:()=>e.push("VendettaSettings")}),r.createElement(F,{label:"Asset Browser",leading:()=>r.createElement(F.Icon,{source:p("grid")}),trailing:F.Arrow,onPress:()=>e.push("VendettaAssetBrowser")}))}var fe="https://discord.gg/n9QQ4XhhJP",ue="https://github.com/vendetta-mod";function I(e,t){return C.open({content:e,source:t})}var w,_e=eval;function ge(e){if(w!==void 0&&w.readyState!==WebSocket.CLOSED&&w.close(),e===""){I("Invalid debugger URL!",p("Small"));return}w=new WebSocket(`ws://${e}`),w.addEventListener("open",()=>I("Connected to debugger.",p("Check"))),w.addEventListener("message",t=>{try{_e(t.data)}catch(o){console.error(o)}}),w.addEventListener("error",t=>{console.log(`Debugger error: ${t.message}`),I("An error occurred with the debugger connection!",p("Small"))})}function ye(){h("nativeLoggingHook",globalThis,(e,t)=>{w?.readyState===WebSocket.OPEN&&w.send(JSON.stringify({message:e[0],level:e[1]})),T.log(e[0])})}var Pe=m("setString","getString");function _(e){try{Pe.setString(e)}catch{throw new Error("Failed to set clipboard content.")}}var{FormRow:he,FormText:Me}=S;function q({label:e,version:t,icon:o}){return r.createElement(he,{label:e,leading:()=>r.createElement(he.Icon,{source:p(o)}),trailing:()=>r.createElement(Me,null,t),onPress:()=>{_(`${e} - ${t}`),I("Copied version to clipboard.",p("toast_copy_link"))}})}var{FormRow:f,FormSection:K,FormInput:Oe}=S,Y=window.HermesInternal.getRuntimeProperties(),Z=g.Platform.constants.reactNativeVersion;function ee(){let[e,t]=r.useState(""),o=[{label:"Discord",version:g.NativeModules.InfoDictionaryManager.Version,icon:"Discord"},{label:"React",version:r.version,icon:"ic_category_16px"},{label:"React Native",version:`${Z.major||0}.${Z.minor||0}.${Z.patch||0}`,icon:"mobile"},{label:"Hermes",version:`${Y["OSS Release Version"]} ${Y.Build} | Bytecode ${Y["Bytecode Version"]}`,icon:"ic_hammer_and_chisel_24px"}];return r.createElement(g.ScrollView,null,r.createElement(K,{title:"Links",android_noDivider:!0},r.createElement(f,{label:"Discord Server",leading:()=>r.createElement(f.Icon,{source:p("Discord")}),trailing:f.Arrow,onPress:()=>V.openURL(fe)}),r.createElement(f,{label:"GitHub",leading:()=>r.createElement(f.Icon,{source:p("img_account_sync_github_white")}),trailing:f.Arrow,onPress:()=>V.openURL(ue)})),r.createElement(K,{title:"Debug"},r.createElement(Oe,{value:e,onChange:n=>t(n),title:"DEBUGGER URL"}),r.createElement(f,{label:"Connect to debug websocket",leading:()=>r.createElement(f.Icon,{source:p("copy")}),trailing:f.Arrow,onPress:()=>ge(e)}),r.createElement(f,{label:"Reload Discord",leading:()=>r.createElement(f.Icon,{source:p("ic_message_retry")}),trailing:f.Arrow,onPress:()=>g.NativeModules.BundleUpdaterManager.reload()})),r.createElement(K,{title:"Versions"},o.map(n=>r.createElement(q,{label:n.label,version:n.version,icon:n.icon}))))}var{FormRow:Ve}=S,Le=g.StyleSheet.create({asset:{width:32,height:32}});function te({asset:e}){return r.createElement(Ve,{label:`${e.name} - ${e.id}`,trailing:()=>r.createElement(g.Image,{source:e.id,style:Le.asset}),onPress:()=>{_(e.name),I("Copied asset name to clipboard.",p("toast_copy_link"))}})}var{FormInput:Ne}=S;function oe(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement(Ne,{value:e,onChange:o=>t(o),title:"SEARCH"}),r.createElement(g.FlatList,{data:Object.values(b).filter(o=>o.name.includes(e)),renderItem:({item:o})=>r.createElement(te,{asset:o}),keyExtractor:o=>o.name}))}var Ee=M("getScreens",!1),Re=M("UserSettingsOverviewWrapper",!1);function re(){h("default",Ee,(e,t)=>({...t,VendettaSettings:{title:"Vendetta",render:ee},VendettaAssetBrowser:{title:"Asset Browser",render:oe}})),h("default",Re,(e,t)=>{let o=Q(t.props.children,n=>n.type&&n.type.name==="UserSettingsOverview");h("renderSupportAndAcknowledgements",o.type.prototype,(n,{props:{children:l}})=>{let i=l.findIndex(c=>c?.type?.name==="UploadLogsButton");i!==-1&&l.splice(i,1)}),h("render",o.type.prototype,(n,{props:{children:l}})=>{let i=[O.Messages.BILLING_SETTINGS,O.Messages.PREMIUM_SETTINGS],c=l.findIndex(s=>i.includes(s.props.title));l.splice(c===-1?4:c,0,r.createElement(X,{navigation:o.props.navigation}))})},!0)}console.log("Hello from Vendetta!");async function $e(){let e=!1;try{re(),z(),ye(),window.vendetta={patcher:ie,metro:{...H,common:G},logger:T,ui:{assets:{all:b,find:pe,getAssetByID:de,getAssetByName:me,getAssetIDByName:p}}}}catch(t){e=!0,alert(`Vendetta failed to initialize...
${t.stack||t.toString()}`)}e||T.log("Vendetta is ready!")}$e();})();
//# sourceURL=Vendetta